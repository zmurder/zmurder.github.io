<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8693861384618000"
     crossorigin="anonymous"></script>
  <meta name="msvalidate.01" content="7EC20DBC74B004C2782077570E15C280">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.14.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8693861384618000"
     crossorigin="anonymous"></script>
    <meta name="description" content="1 简介CUDA 提供了许多环境变量来配置和优化 CUDA 运行时和驱动程序的行为。这些环境变量通常用来控制CUDA的性能、调试和设备行为等。">
<meta property="og:type" content="article">
<meta property="og:title" content="CUDA 环境变量">
<meta property="og:url" content="http://example.com/CUDA/%E5%9F%BA%E7%A1%80/CUDA%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/index.html">
<meta property="og:site_name" content="奔跑的IC">
<meta property="og:description" content="1 简介CUDA 提供了许多环境变量来配置和优化 CUDA 运行时和驱动程序的行为。这些环境变量通常用来控制CUDA的性能、调试和设备行为等。">
<meta property="og:locale">
<meta property="article:published_time" content="2024-12-01T10:13:44.387Z">
<meta property="article:modified_time" content="2024-12-01T10:13:44.387Z">
<meta property="article:author" content="奔跑的IC">
<meta property="article:tag" content="git">
<meta property="article:tag" content="C">
<meta property="article:tag" content="GPU">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/CUDA/%E5%9F%BA%E7%A1%80/CUDA%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-Hans","comments":true,"permalink":"http://example.com/CUDA/%E5%9F%BA%E7%A1%80/CUDA%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/","path":"CUDA/基础/CUDA 环境变量/","title":"CUDA 环境变量"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>CUDA 环境变量 | 奔跑的IC</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">奔跑的IC</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-reorder fa-fw"></i>文章列表</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="nav-text">1 简介</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84-CUDA-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-text">常见的 CUDA 环境变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-DEVICE-MAX-CONNECTIONS"><span class="nav-text">CUDA_DEVICE_MAX_CONNECTIONS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-VISIBLE-DEVICES"><span class="nav-text">CUDA_VISIBLE_DEVICES</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-LAUNCH-BLOCKING"><span class="nav-text">CUDA_LAUNCH_BLOCKING</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-MPS-PIPE-DIRECTORY"><span class="nav-text">CUDA_MPS_PIPE_DIRECTORY</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-MPS-LOG-DIRECTORY"><span class="nav-text">CUDA_MPS_LOG_DIRECTORY</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-DEVICE-WARP-SIZE"><span class="nav-text">CUDA_DEVICE_WARP_SIZE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-CACHE-MAXSIZE"><span class="nav-text">CUDA_CACHE_MAXSIZE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-CACHE-DISABLE"><span class="nav-text">CUDA_CACHE_DISABLE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-FPE-CONTROL"><span class="nav-text">CUDA_FPE_CONTROL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CUDA-DEVICE-DEBUG-SYNC"><span class="nav-text">CUDA_DEVICE_DEBUG_SYNC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B"><span class="nav-text">配置示例</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="奔跑的IC"
      src="/images/zyd.gif">
  <p class="site-author-name" itemprop="name">奔跑的IC</p>
  <div class="site-description" itemprop="description">死磕牛角的IT农民工</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">169</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/CUDA/%E5%9F%BA%E7%A1%80/CUDA%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zyd.gif">
      <meta itemprop="name" content="奔跑的IC">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="奔跑的IC">
      <meta itemprop="description" content="死磕牛角的IT农民工">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="CUDA 环境变量 | 奔跑的IC">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CUDA 环境变量
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-12-01 18:13:44" itemprop="dateCreated datePublished" datetime="2024-12-01T18:13:44+08:00">2024-12-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CUDA/" itemprop="url" rel="index"><span itemprop="name">CUDA</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CUDA/%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">基础</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h1><p>CUDA 提供了许多环境变量来配置和优化 CUDA 运行时和驱动程序的行为。这些环境变量通常用来控制CUDA的性能、调试和设备行为等。</p>
<p>下表列出了 CUDA 环境变量。 与多进程服务相关的环境变量记录在 GPU 部署和管理指南的多进程服务部分。Table 18. CUDA Environment Variables</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Variable</th>
<th>Values</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Device Enumeration and Properties</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>CUDA_VISIBLE_DEVICES</td>
<td>A comma-separated sequence of GPU identifiers  MIG support: MIG-<GPU-UUID>/<GPU instance ID>/<compute instance ID></td>
<td>GPU identifiers are given as integer indices or as UUID strings. GPU UUID  strings should follow the same format as given by nvidia-smi, such as  GPU-8932f937-d72c-4106-c12f-20bd9faed9f6. However, for convenience,  abbreviated forms are allowed; simply specify enough digits from the  beginning of the GPU UUID to uniquely identify that GPU in the target  system. For example, CUDA_VISIBLE_DEVICES=GPU-8932f937 may be a valid  way to refer to the above GPU UUID, assuming no other GPU in the system  shares this prefix.  Only the devices whose index is present in  the sequence are visible to CUDA applications and they are enumerated in the order of the sequence. If one of the indices is invalid, only the  devices whose index precedes the invalid index are visible to CUDA  applications. For example, setting CUDA_VISIBLE_DEVICES to 2,1 causes  device 0 to be invisible and device 2 to be enumerated before device 1.  Setting CUDA_VISIBLE_DEVICES to 0,2,-1,1 causes devices 0 and 2 to be  visible and device 1 to be invisible.  MIG format starts with MIG  keyword and GPU UUID should follow the same format as given by  nvidia-smi. For example,  MIG-GPU-8932f937-d72c-4106-c12f-20bd9faed9f6/1/2. Only single MIG  instance enumeration is supported.</td>
</tr>
<tr>
<td>CUDA_MANAGED_FORCE_DEVICE_ALLOC</td>
<td>0 or 1 (default is 0)</td>
<td>Forces the driver to place all managed allocations in device memory.</td>
</tr>
<tr>
<td>CUDA_DEVICE_ORDER</td>
<td>FASTEST_FIRST, PCI_BUS_ID, (default is FASTEST_FIRST)</td>
<td>FASTEST_FIRST causes CUDA to enumerate the available devices in fastest to slowest  order using a simple heuristic. PCI_BUS_ID orders devices by PCI bus ID  in ascending order.</td>
</tr>
<tr>
<td><strong>Compilation</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>CUDA_CACHE_DISABLE</td>
<td>0 or 1 (default is 0)</td>
<td>Disables caching (when set to 1) or enables caching (when set to 0) for  just-in-time-compilation. When disabled, no binary code is added to or  retrieved from the cache.</td>
</tr>
<tr>
<td>CUDA_CACHE_PATH</td>
<td>filepath</td>
<td>Specifies the folder where the just-in-time compiler caches binary codes; the default values are:on Windows, %APPDATA%\NVIDIA\ComputeCacheon Linux, ~/.nv/ComputeCache</td>
</tr>
<tr>
<td>CUDA_CACHE_MAXSIZE</td>
<td>integer (default is 268435456 (256 MiB) and maximum is 4294967296 (4 GiB))</td>
<td>Specifies the size in bytes of the cache used by the just-in-time compiler.  Binary codes whose size exceeds the cache size are not cached. Older  binary codes are evicted from the cache to make room for newer binary  codes if needed.</td>
</tr>
<tr>
<td>CUDA_FORCE_PTX_JIT</td>
<td>0 or 1 (default is 0)</td>
<td>When set to 1, forces the device driver to ignore any binary code embedded in an application (see <a target="_blank" rel="noopener" href="https://github.com/HeKun-NVIDIA/CUDA-Programming-Guide-in-Chinese/blob/main/附录M_CUDA环境变量/index.html#application-compatibility">Application Compatibility</a>) and to just-in-time compile embedded PTX code instead. If a kernel does not have embedded PTX code, it will fail to load. This environment  variable can be used to validate that PTX code is embedded in an  application and that its just-in-time compilation works as expected to  guarantee application forward compatibility with future architectures  (see <a target="_blank" rel="noopener" href="https://github.com/HeKun-NVIDIA/CUDA-Programming-Guide-in-Chinese/blob/main/附录M_CUDA环境变量/index.html#just-in-time-compilation">Just-in-Time Compilation</a>).</td>
</tr>
<tr>
<td>CUDA_DISABLE_PTX_JIT</td>
<td>0 or 1 (default is 0)</td>
<td>When set to 1, disables the just-in-time compilation of embedded PTX code  and use the compatible binary code embedded in an application (see <a target="_blank" rel="noopener" href="https://github.com/HeKun-NVIDIA/CUDA-Programming-Guide-in-Chinese/blob/main/附录M_CUDA环境变量/index.html#application-compatibility">Application Compatibility</a>). If a kernel does not have embedded binary code or the embedded binary  was compiled for an incompatible architecture, then it will fail to  load. This environment variable can be used to validate that an  application has the compatible SASS code generated for each kernel.(see <a target="_blank" rel="noopener" href="https://github.com/HeKun-NVIDIA/CUDA-Programming-Guide-in-Chinese/blob/main/附录M_CUDA环境变量/index.html#binary-compatibility">Binary Compatibility</a>).</td>
</tr>
<tr>
<td><strong>Execution</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>CUDA_LAUNCH_BLOCKING</td>
<td>0 or 1 (default is 0)</td>
<td>Disables (when set to 1) or enables (when set to 0) asynchronous kernel launches.</td>
</tr>
<tr>
<td>CUDA_DEVICE_MAX_CONNECTIONS</td>
<td>1 to 32 (default is 8)</td>
<td>Sets the number of compute and copy engine concurrent connections (work  queues) from the host to each device of compute capability 3.5 and  above.</td>
</tr>
<tr>
<td>CUDA_AUTO_BOOST</td>
<td>0 or 1</td>
<td>Overrides the autoboost behavior set by the –auto-boost-default option of  nvidia-smi. If an application requests via this environment variable a  behavior that is different from nvidia-smi’s, its request is honored if  there is no other application currently running on the same GPU that  successfully requested a different behavior, otherwise it is ignored.</td>
</tr>
<tr>
<td><strong>cuda-gdb (on Linux platform)</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>CUDA_DEVICE_WAITS_ON_EXCEPTION</td>
<td>0 or 1 (default is 0)</td>
<td>When set to 1, a CUDA application will halt when a device exception occurs,  allowing a debugger to be attached for further debugging.</td>
</tr>
<tr>
<td><strong>MPS service (on Linux platform)</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>CUDA_DEVICE_DEFAULT_PERSISTING_L2_CACHE_PERCENTAGE_LIMIT</td>
<td>Percentage value (between 0 – 100, default is 0)</td>
<td>Devices of compute capability 8.x allow, a portion of L2 cache to be set-aside  for persisting data accesses to global memory. When using CUDA MPS  service, the set-aside size can only be controlled using this  environment variable, before starting CUDA MPS control daemon. I.e., the environment variable should be set before running the command nvidia-cuda-mps-control -d.</td>
</tr>
</tbody>
</table>
</div>
<p>下面是中文的一些说明</p>
<h2 id="常见的-CUDA-环境变量"><a href="#常见的-CUDA-环境变量" class="headerlink" title="常见的 CUDA 环境变量"></a>常见的 CUDA 环境变量</h2><h3 id="CUDA-DEVICE-MAX-CONNECTIONS"><a href="#CUDA-DEVICE-MAX-CONNECTIONS" class="headerlink" title="CUDA_DEVICE_MAX_CONNECTIONS"></a><strong>CUDA_DEVICE_MAX_CONNECTIONS</strong></h3><ul>
<li><strong>描述</strong>：设置一个设备允许的最大连接数。适用于多进程应用程序，当多个进程需要访问同一 GPU 时，此变量可以控制并发连接数。</li>
<li>这个我目前常用到需要设置的一个环境变量，默认是8，我一般设置为最大的32.以便有更多的stream并发。这在我的文章 <a target="_blank" rel="noopener" href="https://zmurder.github.io/CUDA/CUDA%20C%E7%BC%96%E7%A8%8B%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%E7%AC%94%E8%AE%B0/6-2%20%E5%B9%B6%E5%8F%91%E5%86%85%E6%A0%B8%E6%89%A7%E8%A1%8C/?highlight=cuda_device_max_connections">6-2 并发内核执行</a>中也有描述</li>
<li><strong>默认值</strong>：8</li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_DEVICE_MAX_CONNECTIONS=16</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="CUDA-VISIBLE-DEVICES"><a href="#CUDA-VISIBLE-DEVICES" class="headerlink" title="CUDA_VISIBLE_DEVICES"></a><strong>CUDA_VISIBLE_DEVICES</strong></h3><ul>
<li><strong>描述</strong>：控制CUDA程序可见的 GPU 设备。指定要使用的 GPU 设备的列表，其他设备将被忽略。</li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_VISIBLE_DEVICES=0,1</span><br></pre></td></tr></table></figure></li>
<li><strong>功能</strong>：只允许 CUDA 程序访问 GPU 设备 0 和 1。</li>
</ul>
<h3 id="CUDA-LAUNCH-BLOCKING"><a href="#CUDA-LAUNCH-BLOCKING" class="headerlink" title="CUDA_LAUNCH_BLOCKING"></a><strong>CUDA_LAUNCH_BLOCKING</strong></h3><ul>
<li><strong>描述</strong>：控制CUDA内核的同步行为。设置为1时，CUDA调用是同步的，这对于调试非常有用，因为它确保所有内核调用和内存拷贝操作完成后才继续执行。</li>
<li><strong>默认值</strong>：0（异步）</li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_LAUNCH_BLOCKING=1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="CUDA-MPS-PIPE-DIRECTORY"><a href="#CUDA-MPS-PIPE-DIRECTORY" class="headerlink" title="CUDA_MPS_PIPE_DIRECTORY"></a><strong>CUDA_MPS_PIPE_DIRECTORY</strong></h3><ul>
<li><strong>描述</strong>：指定 CUDA MPS（Multi-Process Service）管道目录的位置。CUDA MPS 允许多个进程共享 GPU 上的上下文。</li>
<li><strong>默认值</strong>：<code>/tmp/nvidia-mps</code></li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_MPS_PIPE_DIRECTORY=/var/tmp/nvidia-mps</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="CUDA-MPS-LOG-DIRECTORY"><a href="#CUDA-MPS-LOG-DIRECTORY" class="headerlink" title="CUDA_MPS_LOG_DIRECTORY"></a><strong>CUDA_MPS_LOG_DIRECTORY</strong></h3><ul>
<li><strong>描述</strong>：指定 CUDA MPS 的日志文件目录。用于存储 MPS 运行时生成的日志文件。</li>
<li><strong>默认值</strong>：<code>/tmp/nvidia-mps</code></li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_MPS_LOG_DIRECTORY=/var/log/nvidia-mps</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="CUDA-DEVICE-WARP-SIZE"><a href="#CUDA-DEVICE-WARP-SIZE" class="headerlink" title="CUDA_DEVICE_WARP_SIZE"></a><strong>CUDA_DEVICE_WARP_SIZE</strong></h3><ul>
<li><strong>描述</strong>：设置 CUDA 设备的 warp 大小。大部分现代 CUDA 设备的 warp 大小是 32，但这个变量可以在某些调试场景中使用。</li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_DEVICE_WARP_SIZE=32</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="CUDA-CACHE-MAXSIZE"><a href="#CUDA-CACHE-MAXSIZE" class="headerlink" title="CUDA_CACHE_MAXSIZE"></a><strong>CUDA_CACHE_MAXSIZE</strong></h3><ul>
<li><strong>描述</strong>：设置 CUDA 内核和模块缓存的最大大小。此变量控制缓存的大小以管理 GPU 的内存使用。</li>
<li><strong>默认值</strong>：<code>0</code>（不限制）</li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_CACHE_MAXSIZE=1024</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="CUDA-CACHE-DISABLE"><a href="#CUDA-CACHE-DISABLE" class="headerlink" title="CUDA_CACHE_DISABLE"></a><strong>CUDA_CACHE_DISABLE</strong></h3><ul>
<li><strong>描述</strong>：禁用 CUDA 的内核和模块缓存。对调试和性能优化有帮助。</li>
<li><strong>默认值</strong>：0（启用缓存）</li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_CACHE_DISABLE=1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="CUDA-FPE-CONTROL"><a href="#CUDA-FPE-CONTROL" class="headerlink" title="CUDA_FPE_CONTROL"></a><strong>CUDA_FPE_CONTROL</strong></h3><ul>
<li><strong>描述</strong>：控制 CUDA 运行时浮点异常（FPE）的处理。此变量对调试浮点错误非常有用。</li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_FPE_CONTROL=1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="CUDA-DEVICE-DEBUG-SYNC"><a href="#CUDA-DEVICE-DEBUG-SYNC" class="headerlink" title="CUDA_DEVICE_DEBUG_SYNC"></a><strong>CUDA_DEVICE_DEBUG_SYNC</strong></h3><ul>
<li><strong>描述</strong>：启用 CUDA 设备的调试同步。这对于调试应用程序中出现的异常行为非常有用。</li>
<li><strong>默认值</strong>：0（禁用）</li>
<li><strong>示例</strong>：<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> CUDA_DEVICE_DEBUG_SYNC=1</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="配置示例"><a href="#配置示例" class="headerlink" title="配置示例"></a>配置示例</h3><p>以下是一个配置示例，将这些环境变量添加到 <code>.bashrc</code> 或 <code>.bash_profile</code> 文件中，以便在每次启动终端时自动设置这些变量：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 控制 CUDA 设备的最大连接数</span></span><br><span class="line"><span class="built_in">export</span> CUDA_DEVICE_MAX_CONNECTIONS=16</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定可见的 GPU 设备</span></span><br><span class="line"><span class="built_in">export</span> CUDA_VISIBLE_DEVICES=0,1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用同步内核调用</span></span><br><span class="line"><span class="built_in">export</span> CUDA_LAUNCH_BLOCKING=1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 CUDA MPS 管道目录</span></span><br><span class="line"><span class="built_in">export</span> CUDA_MPS_PIPE_DIRECTORY=/var/tmp/nvidia-mps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 CUDA MPS 日志目录</span></span><br><span class="line"><span class="built_in">export</span> CUDA_MPS_LOG_DIRECTORY=/var/log/nvidia-mps</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 CUDA 设备 warp 大小</span></span><br><span class="line"><span class="built_in">export</span> CUDA_DEVICE_WARP_SIZE=32</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置 CUDA 缓存最大大小</span></span><br><span class="line"><span class="built_in">export</span> CUDA_CACHE_MAXSIZE=1024</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁用 CUDA 缓存</span></span><br><span class="line"><span class="built_in">export</span> CUDA_CACHE_DISABLE=1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用 CUDA 浮点异常控制</span></span><br><span class="line"><span class="built_in">export</span> CUDA_FPE_CONTROL=1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用 CUDA 设备调试同步</span></span><br><span class="line"><span class="built_in">export</span> CUDA_DEVICE_DEBUG_SYNC=1</span><br></pre></td></tr></table></figure>
<p>在保存并重新加载配置文件后（使用 <code>source ~/.bashrc</code>），这些环境变量将生效，从而调整 CUDA 的运行时行为。</p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>奔跑的IC
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://example.com/CUDA/%E5%9F%BA%E7%A1%80/CUDA%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/" title="CUDA 环境变量">http://example.com/CUDA/基础/CUDA 环境变量/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/git/" rel="tag"><i class="fa fa-tag"></i> git</a>
              <a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C</a>
              <a href="/tags/GPU/" rel="tag"><i class="fa fa-tag"></i> GPU</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/CUDA/%E5%9F%BA%E7%A1%80/2%20cuda_context/" rel="prev" title="2 cuda_context">
                  <i class="fa fa-chevron-left"></i> 2 cuda_context
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/DeepLearning/%E5%9B%BE%E5%83%8F%E5%88%86%E7%B1%BB%E7%BD%91%E7%BB%9C/1%20pytorch%E5%AE%98%E6%96%B9demo%20LeNet/" rel="next" title="1 pytorch官方demo LeNet">
                  1 pytorch官方demo LeNet <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">奔跑的IC</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div><script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://lib.baomitu.com/canvas-nest.js/1.0.1/canvas-nest.js"></script>


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"zmurder","repo":"zmurder.github.io","client_id":"cf2343f27b6c29efe0bc","client_secret":"3268a1fa92706c7358d5421f88f76a0f7ada3188","admin_user":"zmurder","distraction_free_mode":true,"proxy":"https://strong-caramel-969805.netlify.app/github_access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"cb7b2ff3df5eba85e14db88b6f8e7747"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
