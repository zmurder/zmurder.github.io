<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8693861384618000"
     crossorigin="anonymous"></script>
  <meta name="msvalidate.01" content="7EC20DBC74B004C2782077570E15C280">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.14.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8693861384618000"
     crossorigin="anonymous"></script>
    <meta name="description" content="GDB使用详解转自：https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;297925056">
<meta property="og:type" content="article">
<meta property="og:title" content="GDB使用">
<meta property="og:url" content="http://example.com/C_C++/GDB%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="奔跑的IC">
<meta property="og:description" content="GDB使用详解转自：https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;297925056">
<meta property="og:locale">
<meta property="article:published_time" content="2024-12-01T10:13:44.403Z">
<meta property="article:modified_time" content="2024-12-01T10:13:44.403Z">
<meta property="article:author" content="奔跑的IC">
<meta property="article:tag" content="C">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/C_C++/GDB%E4%BD%BF%E7%94%A8/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-Hans","comments":true,"permalink":"http://example.com/C_C++/GDB%E4%BD%BF%E7%94%A8/","path":"C_C++/GDB使用/","title":"GDB使用"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>GDB使用 | 奔跑的IC</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">奔跑的IC</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-reorder fa-fw"></i>文章列表</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#GDB%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3"><span class="nav-text">GDB使用详解</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%A6%82%E8%BF%B0"><span class="nav-text">1. 概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%90%AF%E7%94%A8GDB%E8%B0%83%E8%AF%95"><span class="nav-text">2. 启用GDB调试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E9%80%80%E5%87%BAGDB"><span class="nav-text">3. 退出GDB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-text">4. 常用命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%A4%BA%E4%BE%8B"><span class="nav-text">5. 常用命令示例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-run%E5%91%BD%E4%BB%A4"><span class="nav-text">5.1 run命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-continue%E5%91%BD%E4%BB%A4"><span class="nav-text">5.2 continue命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-break%E5%91%BD%E4%BB%A4"><span class="nav-text">5.3 break命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-info-break%E3%80%81enable%E3%80%81disable%E5%92%8Cdelete%E5%91%BD%E4%BB%A4"><span class="nav-text">5.4 info break、enable、disable和delete命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-backtrace%E5%92%8Cframe%E5%91%BD%E4%BB%A4"><span class="nav-text">5.5 backtrace和frame命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6-list%E5%91%BD%E4%BB%A4"><span class="nav-text">5.6 list命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-7-print%E5%92%8Cptype%E5%91%BD%E4%BB%A4"><span class="nav-text">5.7 print和ptype命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-8-whatis%E5%92%8Cptype%E5%91%BD%E4%BB%A4"><span class="nav-text">5.8 whatis和ptype命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-9-thread%E5%91%BD%E4%BB%A4"><span class="nav-text">5.9 thread命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-10-next%E3%80%81step%E5%91%BD%E4%BB%A4"><span class="nav-text">5.10 next、step命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-11-return%E3%80%81finish%E5%91%BD%E4%BB%A4"><span class="nav-text">5.11 return、finish命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-12-until%E5%91%BD%E4%BB%A4"><span class="nav-text">5.12 until命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-13-jump%E5%91%BD%E4%BB%A4"><span class="nav-text">5.13 jump命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-14-disassemble%E5%91%BD%E4%BB%A4"><span class="nav-text">5.14 disassemble命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-15-set-args-%E5%92%8C-show-args%E5%91%BD%E4%BB%A4"><span class="nav-text">5.15 set args 和 show args命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-16-tbreak%E5%91%BD%E4%BB%A4"><span class="nav-text">5.16 tbreak命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-17-watch%E5%91%BD%E4%BB%A4"><span class="nav-text">5.17 watch命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-18-call%E5%91%BD%E4%BB%A4"><span class="nav-text">5.18 call命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-19-help%E5%91%BD%E4%BB%A4"><span class="nav-text">5.19 help命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-GDB%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%B0%83%E8%AF%95"><span class="nav-text">6. GDB多线程调试</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-%E6%A6%82%E8%BF%B0"><span class="nav-text">6.1 概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4"><span class="nav-text">6.2 一些命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-%E4%B8%80%E4%BA%9B%E6%9C%AF%E8%AF%AD"><span class="nav-text">6.3 一些术语</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-%E8%AE%BE%E7%BD%AE%E7%BA%BF%E7%A8%8B%E9%94%81"><span class="nav-text">6.4 设置线程锁</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-gdbinit"><span class="nav-text">7 .gdbinit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-text">附录</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="奔跑的IC"
      src="/images/zyd.gif">
  <p class="site-author-name" itemprop="name">奔跑的IC</p>
  <div class="site-description" itemprop="description">死磕牛角的IT农民工</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">149</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/C_C++/GDB%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zyd.gif">
      <meta itemprop="name" content="奔跑的IC">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="奔跑的IC">
      <meta itemprop="description" content="死磕牛角的IT农民工">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="GDB使用 | 奔跑的IC">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          GDB使用
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-12-01 18:13:44" itemprop="dateCreated datePublished" datetime="2024-12-01T18:13:44+08:00">2024-12-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C_C++</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="GDB使用详解"><a href="#GDB使用详解" class="headerlink" title="GDB使用详解"></a>GDB使用详解</h1><p>转自：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/297925056">https://zhuanlan.zhihu.com/p/297925056</a></p>
<p>部分有自己的修改和完善</p>
<h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h2><p>   GDB 全称“GNU  symbolic debugger”，从名称上不难看出，它诞生于 GNU 计划（同时诞生的还有 GCC、Emacs 等），是 Linux  下常用的程序调试器。发展至今，GDB 已经迭代了诸多个版本，当下的 GDB 支持调试多种编程语言编写的程序，包括  C、C++、Go、Objective-C、OpenCL、Ada 等。实际场景中，GDB 更常用来调试 C 和 C++  程序。一般来说，GDB主要帮助我们完成以下四个方面的功能：</p>
<ol>
<li>启动你的程序，可以按照你的自定义的要求随心所欲的运行程序。</li>
<li>在某个指定的地方或条件下暂停程序。</li>
<li>当程序被停住时，可以检查此时你的程序中所发生的事。</li>
<li>在程序执行过程中修改程序中的变量或条件，将一个bug产生的影响修正从而测试其他bug。</li>
</ol>
<p>使用GDB调试程序，有以下两点需要注意：</p>
<ol>
<li>要使用GDB调试某个程序，该程序编译时必须加上编译选项 <strong><code>-g</code></strong>，否则该程序是不包含调试信息的；</li>
<li>GCC编译器支持 <strong><code>-O</code></strong>  和 <strong><code>-g</code></strong> 一起参与编译。GCC编译过程对进行优化的程度可分为5个等级，分别为 ：</li>
</ol>
<ul>
<li><strong>-O/-O0</strong>： 不做任何优化，这是默认的编译选项 ；</li>
<li><strong>-O1</strong>：使用能减少目标文件大小以及执行时间并且不会使编译时间明显增加的优化。     该模式在编译大型程序的时候会花费更多的时间和内存。在 -O1下：编译会尝试减少代     码体积和代码运行时间，但是并不执行会花费大量时间的优化操作。</li>
<li><strong>-O2</strong>：包含 -O1的优化并增加了不需要在目标文件大小和执行速度上进行折衷的优化。      GCC执行几乎所有支持的操作但不包括空间和速度之间权衡的优化，编译器不执行循环      展开以及函数内联。这是推荐的优化等级，除非你有特殊的需求。 -O2会比 -O1启用多     一些标记。与 -O1比较该优化  -O2将会花费更多的编译时间当然也会生成性能更好的代     码。</li>
<li><strong>-O3</strong>：打开所有 -O2的优化选项并且增加 -finline-functions,  -funswitch-loops,-fpredictive-commoning, -fgcse-after-reload and  -ftree-vectorize优化选项。这是最高最危险     的优化等级。用这个选项会延长编译代码的时间，并且在使用  gcc4.x的系统里不应全局     启用。自从 3.x版本以来 gcc的行为已经有了极大地改变。在 3.x，，-O3生成的代码也只      是比 -O2快一点点而已，而 gcc4.x中还未必更快。用 -O3来编译所有的 软件包将产生更      大体积更耗内存的二进制文件，大大增加编译失败的机会或不可预知的程序行为（包括     错误）。这样做将得不偿失，记住过犹不及。在 gcc  4.x.中使用 -O3是不推荐的。</li>
<li><strong>-Os</strong>：专门优化目标文件大小  ,执行所有的不增加目标文件大小的 -O2优化选项。同时 -Os还会执行更加优化程序空间的选项。这对于磁盘空间极其紧张或者 CPU缓存较小的     机器非常有用。但也可能产生些许问题，因此软件树中的大部分 ebuild都过滤掉这个等     级的优化。使用 -Os是不推荐的。</li>
</ul>
<h2 id="2-启用GDB调试"><a href="#2-启用GDB调试" class="headerlink" title="2. 启用GDB调试"></a>2. 启用GDB调试</h2><p>GDB调试主要有三种方式：</p>
<ol>
<li>直接调试目标程序：gdb ./hello_server</li>
<li>附加进程id：gdb attach pid</li>
<li>调试core文件：gdb  filename  corename</li>
</ol>
<h2 id="3-退出GDB"><a href="#3-退出GDB" class="headerlink" title="3. 退出GDB"></a>3. 退出GDB</h2><ul>
<li>可以用命令：<strong>q（quit的缩写）或者 Ctr + d</strong> 退出GDB。</li>
<li>如果GDB attach某个进程，退出GDB之前要用命令 <strong>detach</strong> 解除附加进程。</li>
</ul>
<h2 id="4-常用命令"><a href="#4-常用命令" class="headerlink" title="4. 常用命令"></a>4. 常用命令</h2><div class="table-container">
<table>
<thead>
<tr>
<th>命令名称</th>
<th>命令缩写</th>
<th>命令说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>run</td>
<td>r</td>
<td>运行一个待调试的程序</td>
</tr>
<tr>
<td>continue</td>
<td>c</td>
<td>让暂停的程序继续运行</td>
</tr>
<tr>
<td>next</td>
<td>n</td>
<td>运行到下一行</td>
</tr>
<tr>
<td>step</td>
<td>s</td>
<td>单步执行，遇到函数会进入</td>
</tr>
<tr>
<td>until</td>
<td>u</td>
<td>运行到指定行停下来</td>
</tr>
<tr>
<td>finish</td>
<td>fi</td>
<td>结束当前调用函数，回到上一层调用函数处</td>
</tr>
<tr>
<td>return</td>
<td>return</td>
<td>结束当前调用函数并返回指定值，到上一层函数调用处</td>
</tr>
<tr>
<td>jump</td>
<td>j</td>
<td>将当前程序执行流跳转到指定行或地址</td>
</tr>
<tr>
<td>print</td>
<td>p</td>
<td>打印变量或寄存器值</td>
</tr>
<tr>
<td>backtrace</td>
<td>bt</td>
<td>查看当前线程的调用堆栈</td>
</tr>
<tr>
<td>frame</td>
<td>f</td>
<td>切换到当前调用线程的指定堆栈</td>
</tr>
<tr>
<td>thread</td>
<td>thread</td>
<td>切换到指定线程</td>
</tr>
<tr>
<td>break</td>
<td>b</td>
<td>添加断点</td>
</tr>
<tr>
<td>tbreak</td>
<td>tb</td>
<td>添加临时断点</td>
</tr>
<tr>
<td>delete</td>
<td>d</td>
<td>删除断点</td>
</tr>
<tr>
<td>enable</td>
<td>enable</td>
<td>启用某个断点</td>
</tr>
<tr>
<td>disable</td>
<td>disable</td>
<td>禁用某个断点</td>
</tr>
<tr>
<td>watch</td>
<td>watch</td>
<td>监视某一个变量或内存地址的值是否发生变化</td>
</tr>
<tr>
<td>list</td>
<td>l</td>
<td>显示源码</td>
</tr>
<tr>
<td>info</td>
<td>i</td>
<td>查看断点 / 线程等信息</td>
</tr>
<tr>
<td>ptype</td>
<td>ptype</td>
<td>查看变量类型</td>
</tr>
<tr>
<td>disassemble</td>
<td>dis</td>
<td>查看汇编代码</td>
</tr>
<tr>
<td>set args</td>
<td>set args</td>
<td>设置程序启动命令行参数</td>
</tr>
<tr>
<td>show args</td>
<td>show args</td>
<td>查看设置的命令行参数</td>
</tr>
</tbody>
</table>
</div>
<h2 id="5-常用命令示例"><a href="#5-常用命令示例" class="headerlink" title="5. 常用命令示例"></a>5. 常用命令示例</h2><h3 id="5-1-run命令"><a href="#5-1-run命令" class="headerlink" title="5.1 run命令"></a>5.1 run命令</h3><p>   默认情况下，以 <code>gdb ./filename</code> 方式启用GDB调试只是附加了一个调试文件，并没有启动这个程序，需要输入run命令（简写为r）启动这个程序：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost src]# gdb ./redis-server</span><br><span class="line">GNU gdb (GDB) 8.0</span><br><span class="line">Copyright (C) 2017 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">...此处省略很多行...</span><br><span class="line">Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...</span><br><span class="line">Reading symbols from ./redis-server...done.</span><br><span class="line">(gdb) r</span><br><span class="line">Starting program: /data/redis-5.0.3/src/redis-server </span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">...此处省略很多行...</span><br><span class="line">34628:M 09 Nov 2020 00:10:16.318 * DB loaded from disk: 0.000 seconds</span><br></pre></td></tr></table></figure>
<p>   以上是以redis-server程序为例，输入 r 后启动了redis服务器，在GDB界面按 Ctrl + C 让GDB中断下来，再次输入 r 命令，GDB会询问是否重启程序，输入 y（或yes）：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">34628:M 09 Nov 2020 00:10:16.318 * Ready to accept connections</span><br><span class="line">^C</span><br><span class="line">Thread 1 &quot;redis-server&quot; received signal SIGINT, Interrupt.</span><br><span class="line">0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">(gdb) r</span><br><span class="line">The program being debugged has been started already.</span><br><span class="line">Start it from the beginning? (y or n) y</span><br><span class="line">Starting program: /data/redis-5.0.3/src/redis-server </span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br></pre></td></tr></table></figure>
<p>   退出GDB，会提示用户要关闭当前调试进程，是否继续退出：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">34636:M 09 Nov 2020 00:10:31.427 * Ready to accept connections</span><br><span class="line">^C</span><br><span class="line">Thread 1 &quot;redis-server&quot; received signal SIGINT, Interrupt.</span><br><span class="line">0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">(gdb) q</span><br><span class="line">A debugging session is active.</span><br><span class="line"></span><br><span class="line">    Inferior 1 [process 34636] will be killed.</span><br><span class="line"></span><br><span class="line">Quit anyway? (y or n) y</span><br><span class="line">[root@localhost src]#</span><br></pre></td></tr></table></figure>
<h3 id="5-2-continue命令"><a href="#5-2-continue命令" class="headerlink" title="5.2 continue命令"></a>5.2 continue命令</h3><p>   当GDB触发断点或者使用 Ctrl + C 命令中断下来后，想让程序继续运行，只要输入 continue（简写为c）命令即可。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">34839:M 09 Nov 2020 00:37:56.364 * DB loaded from disk: 0.000 seconds</span><br><span class="line">34839:M 09 Nov 2020 00:37:56.364 * Ready to accept connections</span><br><span class="line">^C</span><br><span class="line">Thread 1 &quot;redis-server&quot; received signal SIGINT, Interrupt.</span><br><span class="line">0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line">34839:M 09 Nov 2020 00:46:16.004 * 100 changes in 300 seconds. Saving...</span><br><span class="line">34839:M 09 Nov 2020 00:46:16.046 * Background saving started by pid 34887</span><br></pre></td></tr></table></figure>
<h3 id="5-3-break命令"><a href="#5-3-break命令" class="headerlink" title="5.3 break命令"></a>5.3 break命令</h3><p>   break命令（简写为b）用于添加断点，可以使用以下几种方式添加断点：</p>
<ul>
<li><strong>break FunctionName</strong>，在函数的入口处添加一个断点；</li>
<li><strong>break LineNo</strong>，在<strong>当前文件</strong>行号为<strong>LineNo</strong>处添加断点；</li>
<li><strong>break FileName:LineNo</strong>，在<strong>FileName</strong>文件行号为<strong>LineNo</strong>处添加一个断点；</li>
<li><strong>break FileName:FunctionName</strong>，在<strong>FileName</strong>文件的<strong>FunctionName</strong>函数的入口处添加断点；</li>
<li><strong>break -/+offset</strong>，在当前程序暂停位置的前/后 offset 行处下断点；</li>
<li><p><strong>break … if cond</strong>，下条件断点；</p>
<p> 分别举例介绍以上几种下断点方法：</p>
</li>
</ul>
<ol>
<li>在<code>main</code>函数入口处下断点：</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">35274:M 09 Nov 2020 01:46:16.910 * Ready to accept connections</span><br><span class="line">^C</span><br><span class="line">Thread 1 &quot;redis-server&quot; received signal SIGINT, Interrupt.</span><br><span class="line">0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">(gdb) b main</span><br><span class="line">Breakpoint 1 at 0x430890: file server.c, line 4003.</span><br><span class="line">(gdb) r</span><br><span class="line">The program being debugged has been started already.</span><br><span class="line">Start it from the beginning? (y or n) y</span><br><span class="line">Starting program: /data/redis-5.0.3/src/redis-server </span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">Using host libthread_db library &quot;/lib64/libthread_db.so.1&quot;.</span><br><span class="line"></span><br><span class="line">Breakpoint 1, main (argc=1, argv=0x7fffffffe648) at server.c:4003</span><br><span class="line">4003	int main(int argc, char **argv) &#123;</span><br><span class="line">(gdb) </span><br></pre></td></tr></table></figure>
<p>\2. 在<strong>当前文件</strong>的<strong>4041</strong>行下断点：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(gdb) b 4041</span><br><span class="line">Breakpoint 2 at 0x4308bc: file server.c, line 4041.</span><br><span class="line">(gdb) info b</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">1       breakpoint     keep y   0x0000000000430890 in main at server.c:4003</span><br><span class="line">	breakpoint already hit 1 time</span><br><span class="line">2       breakpoint     keep y   0x00000000004308bc in main at server.c:4041</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Breakpoint 2, main (argc=1, argv=0x7fffffffe648) at server.c:4041</span><br><span class="line">4041	    zmalloc_set_oom_handler(redisOutOfMemoryHandler);</span><br><span class="line">(gdb)    </span><br></pre></td></tr></table></figure>
<p><strong>3. redis-server</strong>的默认端口是<strong>6379</strong>，绑定端口是需要调用<code>bind</code>函数，搜到该函数调用位置是在 <strong>anet.c</strong> 文件的441行：</p>

<p>在这里添加一个断点：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">3208:M 09 Nov 2020 18:33:14.205 * DB loaded from disk: 0.000 seconds</span><br><span class="line">3208:M 09 Nov 2020 18:33:14.205 * Ready to accept connections</span><br><span class="line">^C</span><br><span class="line">Thread 1 &quot;redis-server&quot; received signal SIGINT, Interrupt.</span><br><span class="line">0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">(gdb) b anet.c:441</span><br><span class="line">Breakpoint 1 at 0x429b72: file anet.c, line 441.</span><br><span class="line">(gdb) r</span><br><span class="line">The program being debugged has been started already.</span><br><span class="line">Start it from the beginning? (y or n) y</span><br><span class="line">Starting program: /data/redis-5.0.3/src/redis-server </span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">Using host libthread_db library &quot;/lib64/libthread_db.so.1&quot;.</span><br><span class="line">3232:C 09 Nov 2020 18:38:18.129 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br><span class="line">3232:C 09 Nov 2020 18:38:18.129 # Redis version=5.0.3, bits=64, commit=00000000, modified=0, pid=3232, just started</span><br><span class="line">3232:C 09 Nov 2020 18:38:18.129 # Warning: no config file specified, using the default config. In order to specify a config file use /data/redis-5.0.3/src/redis-server /path/to/redis.conf</span><br><span class="line">3232:M 09 Nov 2020 18:38:18.129 * Increased maximum number of open files to 10032 (it was originally set to 4096).</span><br><span class="line"></span><br><span class="line">Breakpoint 1, anetListen (err=0x7b4320 &lt;server+576&gt; &quot;&quot;, s=6, sa=0x9c5ee0, len=28, backlog=511) at anet.c:441</span><br><span class="line">441	    if (bind(s,sa,len) == -1) &#123;</span><br><span class="line">(gdb) </span><br></pre></td></tr></table></figure>
<p>\4. 也可以选择在某个文件的某个函数的入口处添加断点，以<strong><code>hset</code></strong>命令的回调函数为例：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">redisCommand</span> <span class="title">redisCommandTable</span>[] =</span> &#123;</span><br><span class="line">    <span class="comment">//此处省略之前的命令注册代码</span></span><br><span class="line">    &#123;<span class="string">&quot;hset&quot;</span>,hsetCommand,<span class="number">-4</span>,<span class="string">&quot;wmF&quot;</span>,<span class="number">0</span>,<span class="literal">NULL</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>&#125;,</span><br><span class="line">    <span class="comment">//此处省略之后的命令注册代码</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>查到是 <strong>t_hash.c</strong> 文件的<strong><code>hsetCommand</code></strong>函数，在此处下断点：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">3232:M 09 Nov 2020 18:40:49.044 * DB loaded from disk: 0.000 seconds</span><br><span class="line">3232:M 09 Nov 2020 18:40:49.044 * Ready to accept connections</span><br><span class="line">^C</span><br><span class="line">Thread 1 &quot;redis-server&quot; received signal SIGINT, Interrupt.</span><br><span class="line">0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">(gdb) b t_hash.c:hsetCommand</span><br><span class="line">Breakpoint 2 at 0x45e870: file t_hash.c, line 530.</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br></pre></td></tr></table></figure>
<p>然后通过redis客户端<strong>redis-cli</strong>连上<strong>redis-server</strong>，并输入一条<strong><code>hset</code></strong>命令：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# redis-cli</span><br><span class="line">127.0.0.1:6379&gt; hset maptest key1 value1</span><br><span class="line">(integer) 1</span><br><span class="line">(3.54s)</span><br></pre></td></tr></table></figure>
<p>断点被触发：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Thread 1 &quot;redis-server&quot; hit Breakpoint 2, hsetCommand (c=0x7ffff7b0d0c0) at t_hash.c:530</span><br><span class="line">530	void hsetCommand(client *c) &#123;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br></pre></td></tr></table></figure>
<h3 id="5-4-info-break、enable、disable和delete命令"><a href="#5-4-info-break、enable、disable和delete命令" class="headerlink" title="5.4 info break、enable、disable和delete命令"></a>5.4 info break、enable、disable和delete命令</h3><p>   命令格式及作用：</p>
<ul>
<li><strong>info break</strong>，也可简写为 <strong>i b</strong>，作用是显示当前所有断点信息；</li>
<li><strong>disable 断点编号</strong>，禁用某个断点，使得断点不会被触发；</li>
<li><strong>enable 断点编号</strong>，启用某个被禁用的断点；</li>
<li><strong>delete 断点编号</strong>，删除某个断点。</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">(gdb) info b</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">1       breakpoint     keep y   0x0000000000430890 in main at server.c:4003</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">2       breakpoint     keep y   0x00000000004308bc in main at server.c:4041</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">3       breakpoint     keep y   0x0000000000429b72 in anetListen at anet.c:441</span><br><span class="line">    breakpoint already hit 2 times</span><br><span class="line">4       breakpoint     keep y   0x000000000045e870 in hsetCommand at t_hash.c:530</span><br><span class="line">(gdb) disable 4</span><br><span class="line">(gdb) info b</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">1       breakpoint     keep y   0x0000000000430890 in main at server.c:4003</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">2       breakpoint     keep y   0x00000000004308bc in main at server.c:4041</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">3       breakpoint     keep y   0x0000000000429b72 in anetListen at anet.c:441</span><br><span class="line">    breakpoint already hit 2 times</span><br><span class="line">4       breakpoint     keep n   0x000000000045e870 in hsetCommand at t_hash.c:530</span><br><span class="line">(gdb) enable 4</span><br><span class="line">(gdb) info b</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">1       breakpoint     keep y   0x0000000000430890 in main at server.c:4003</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">2       breakpoint     keep y   0x00000000004308bc in main at server.c:4041</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">3       breakpoint     keep y   0x0000000000429b72 in anetListen at anet.c:441</span><br><span class="line">    breakpoint already hit 2 times</span><br><span class="line">4       breakpoint     keep y   0x000000000045e870 in hsetCommand at t_hash.c:530</span><br><span class="line">(gdb) delete 3</span><br><span class="line">(gdb) info b</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">1       breakpoint     keep y   0x0000000000430890 in main at server.c:4003</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">2       breakpoint     keep y   0x00000000004308bc in main at server.c:4041</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">4       breakpoint     keep y   0x000000000045e870 in hsetCommand at t_hash.c:530</span><br></pre></td></tr></table></figure>
<p>断点信息中第四列 <strong><em>Enb</em></strong>，当断点启动时是 y，断点被禁用后是 n。</p>
<h3 id="5-5-backtrace和frame命令"><a href="#5-5-backtrace和frame命令" class="headerlink" title="5.5 backtrace和frame命令"></a>5.5 backtrace和frame命令</h3><p>   命令格式及作用：</p>
<ul>
<li><strong>backtrace</strong>，也可简写为 <strong>bt</strong>，用于查看当前调用堆栈。</li>
<li><strong>frame 堆栈编号</strong>，也可简写为 <strong>f 堆栈编号</strong>，用于切换到其他堆栈处。</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Thread 1 &quot;redis-server&quot; hit Breakpoint 4, hsetCommand (c=0x7ffff7b0d0c0) at t_hash.c:530</span><br><span class="line">530 void hsetCommand(client *c) &#123;</span><br><span class="line">(gdb) bt</span><br><span class="line">#0  hsetCommand (c=0x7ffff7b0d0c0) at t_hash.c:530</span><br><span class="line">#1  0x000000000042d320 in call (c=0x7ffff7b0d0c0, flags=15) at server.c:2437</span><br><span class="line">#2  0x000000000043168d in processCommand (c=0x7ffff7b0d0c0) at server.c:2729</span><br><span class="line">#3  0x000000000043e7af in processInputBuffer (c=0x7ffff7b0d0c0) at networking.c:1446</span><br><span class="line">#4  0x00000000004288d3 in aeProcessEvents (eventLoop=0x7ffff7a300a0, flags=11) at ae.c:443</span><br><span class="line">#5  0x0000000000428bfb in aeMain (eventLoop=0x7ffff7a300a0) at ae.c:501</span><br><span class="line">#6  0x0000000000430d9e in main (argc=&lt;optimized out&gt;, argv=0x7fffffffe648) at server.c:4197</span><br><span class="line">(gdb) f 1</span><br><span class="line">#1  0x000000000042d320 in call (c=0x7ffff7b0d0c0, flags=15) at server.c:2437</span><br><span class="line">2437        c-&gt;cmd-&gt;proc(c);</span><br><span class="line">(gdb) f 2</span><br><span class="line">#2  0x000000000043168d in processCommand (c=0x7ffff7b0d0c0) at server.c:2729</span><br><span class="line">2729            call(c,CMD_CALL_FULL);</span><br><span class="line">(gdb) f 3</span><br><span class="line">#3  0x000000000043e7af in processInputBuffer (c=0x7ffff7b0d0c0) at networking.c:1446</span><br><span class="line">1446                if (processCommand(c) == C_OK) &#123;</span><br><span class="line">(gdb) f 4</span><br><span class="line">#4  0x00000000004288d3 in aeProcessEvents (eventLoop=0x7ffff7a300a0, flags=11) at ae.c:443</span><br><span class="line">443                 fe-&gt;rfileProc(eventLoop,fd,fe-&gt;clientData,mask);</span><br><span class="line">(gdb) f 5</span><br><span class="line">#5  0x0000000000428bfb in aeMain (eventLoop=0x7ffff7a300a0) at ae.c:501</span><br><span class="line">501         aeProcessEvents(eventLoop, AE_ALL_EVENTS|AE_CALL_AFTER_SLEEP);</span><br><span class="line">(gdb) f 6</span><br><span class="line">#6  0x0000000000430d9e in main (argc=&lt;optimized out&gt;, argv=0x7fffffffe648) at server.c:4197</span><br><span class="line">4197        aeMain(server.el);</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br></pre></td></tr></table></figure>
<h3 id="5-6-list命令"><a href="#5-6-list命令" class="headerlink" title="5.6 list命令"></a>5.6 list命令</h3><p>   命令格式及作用：</p>
<ul>
<li><p><strong>list</strong>，输出上一次list命令显示的代码后面的代码，如果是第一次执行list命令，则会显示当前正在执行代码位置附近的代码；</p>
</li>
<li><p><strong>list -</strong>，带一个减号，显示上一次list命令显示的代码前面的代码；</p>
</li>
<li><p><strong>list  LineNo</strong>，显示当前代码文件第 <strong>LineNo</strong> 行附近的代码；</p>
</li>
<li><p><strong>list FileName:LineNo</strong>，显示 <strong>FileName</strong> 文件第 <strong>LineNo</strong> 行附近的代码；</p>
</li>
<li><strong>list FunctionName</strong>，显示当前文件的 <strong>FunctionName</strong> 函数附近的代码；</li>
<li><strong>list FileName:FunctionName</strong>，显示 <strong>FileName</strong> 文件的 <strong>FunctionName</strong> 函数附件的代码；</li>
<li><strong>list from,to</strong>，其中<strong>from</strong>和<strong>to</strong>是具体的代码位置，显示这之间的代码；</li>
</ul>
<p><strong>list</strong>命令默认只会输出 <strong>10</strong> 行源代码，也可以使用如下命令修改：</p>
<ul>
<li><strong>show listsize</strong>，查看 <strong>list</strong> 命令显示的代码行数；</li>
<li><strong>set listsize count</strong>，设置 <strong>list</strong> 命令显示的代码行数为 <strong>count</strong>;</li>
</ul>
<h3 id="5-7-print和ptype命令"><a href="#5-7-print和ptype命令" class="headerlink" title="5.7 print和ptype命令"></a>5.7 print和ptype命令</h3><p>   命令格式及作用：</p>
<ul>
<li><p><strong>print param</strong>，用于在调试过程中查看变量的值；</p>
</li>
<li><p><strong>print param=value</strong>，用于在调试过程中修改变量的值；</p>
</li>
<li><p><strong>print a+b+c</strong>，可以进行一定的表达式计算，这里是计算a、b、c三个变量之和；</p>
</li>
<li><p><strong>print func()</strong>，输出<code>func</code>函数执行的结果，常见的用途是打印系统函数执行失败原因：<code>print strerror(errno)</code>；</p>
</li>
<li><p><strong>print *this</strong>，在c++对象中，可以输出当前对象的各成员变量的值；</p>
</li>
<li><p><strong>p *array@len</strong>，查看一段连续的内存空间的值。比如数组的一段，或是动态分配的数据的大小。你可以使用GDB的“@”操作符，“@”的左边是第一个内存的地址的值，“@”的右边则你你想查看内存的长度。例如，你的程序中有这样的语句：<br><code>int *array = (int *) malloc (len * sizeof (int));</code> </p>
<p><code>(gdb) p *array@len</code><br>@的左边是数组的首地址的值，也就是变量array所指向的内容，右边则是数据的长度，其保存在变量len中，其输出结果，大约是下面这个样子的：<br><code>(gdb) p *array@len
$1 = &#123;2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40&#125;</code><br>如果是静态数组的话，可以直接用print数组名，就可以显示数组中所有数据的内容了。</p>
</li>
<li><p>输出格式<br>一般来说，GDB会根据变量的类型输出变量的值。但你也可以自定义GDB的输出的格式。例如，你想输出一个整数的十六进制，或是二进制来查看这个整型变量的中的位的情况。要做到这样，你可以使用GDB的数据显示格式：</p>
<ul>
<li><p>x 按十六进制格式显示变量。</p>
</li>
<li><p>d 按十进制格式显示变量。</p>
</li>
<li><p>u 按十六进制格式显示无符号整型。</p>
</li>
<li><p>o 按八进制格式显示变量。</p>
</li>
<li><p>t 按二进制格式显示变量。</p>
</li>
<li><p>a 按十六进制格式显示变量。</p>
</li>
<li><p>c 按字符格式显示变量。</p>
</li>
<li><p>f 按浮点数格式显示变量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p i</span><br><span class="line">$21 = 101</span><br><span class="line">(gdb) p/a i</span><br><span class="line">$22 = 0x65</span><br><span class="line">(gdb) p/c i</span><br><span class="line">$23 = 101 &#x27;e&#x27;</span><br><span class="line">(gdb) p/f i</span><br><span class="line">$24 = 1.41531145e-43</span><br><span class="line">(gdb) p/x i</span><br><span class="line">$25 = 0x65</span><br><span class="line">(gdb) p/t i</span><br><span class="line">$26 = 1100101</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>程序变量<br>在GDB中，你可以随时查看以下三种变量的值：<br>1、全局变量（所有文件可见的）<br>2、静态全局变量（当前文件可见的）<br>3、局部变量（当前Scope可见的）<br>如果你的局部变量和全局变量发生冲突（也就是重名），一般情况下是局部变量会隐藏全局变量，也就是说，如果一个全局变量和一个函数中的局部变量同名时，如果当前停止点在函数中，用print显示出的变量的值会是函数中的局部变量的值。如果此时你想查看全局变量的值时，你可以使用“::”操作符：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(gdb) p file::variable</span><br><span class="line">(gdb) p function::variable</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">8099:M 10 Nov 2020 04:06:23.436 * DB loaded from disk: 0.000 seconds</span><br><span class="line">8099:M 10 Nov 2020 04:06:23.436 * Ready to accept connections</span><br><span class="line">^C</span><br><span class="line">Thread 1 &quot;redis-server&quot; received signal SIGINT, Interrupt.</span><br><span class="line">0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">(gdb) b listenToPort</span><br><span class="line">Breakpoint 1 at 0x42fa20: file server.c, line 1913.</span><br><span class="line">(gdb) r</span><br><span class="line">The program being debugged has been started already.</span><br><span class="line">Start it from the beginning? (y or n) y</span><br><span class="line">Starting program: /data/redis-5.0.3/src/redis-server </span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">Using host libthread_db library &quot;/lib64/libthread_db.so.1&quot;.</span><br><span class="line">8107:C 10 Nov 2020 04:06:32.413 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br><span class="line">8107:C 10 Nov 2020 04:06:32.413 # Redis version=5.0.3, bits=64, commit=00000000, modified=0, pid=8107, just started</span><br><span class="line">8107:C 10 Nov 2020 04:06:32.413 # Warning: no config file specified, using the default config. In order to specify a config file use /data/redis-5.0.3/src/redis-server /path/to/redis.conf</span><br><span class="line">8107:M 10 Nov 2020 04:06:32.414 * Increased maximum number of open files to 10032 (it was originally set to 4096).</span><br><span class="line"></span><br><span class="line">Breakpoint 1, listenToPort (port=6379, fds=0x7b424c &lt;server+364&gt;, count=0x7b428c &lt;server+428&gt;) at server.c:1913</span><br><span class="line">1913    int listenToPort(int port, int *fds, int *count) &#123;</span><br><span class="line">(gdb) p port</span><br><span class="line">$1 = 6379</span><br><span class="line">(gdb) p port=6378</span><br><span class="line">$2 = 6378</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br></pre></td></tr></table></figure>
<p>   如上所示，在<code>listenToPort</code>函数入口处下断点，输入 <strong>r</strong>，redis-server重启时触发断点，打印得到 <strong>port</strong> 的值为6379，再通过 <code>**p port=6378**</code> 将监听的端口改成6378，redis-server启动后查询端口监听情况：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# netstat -apn | grep redis-server</span><br><span class="line">tcp      0    0 0.0.0.0:6378         0.0.0.0:*        LISTEN      8131/redis-server * </span><br><span class="line">tcp      0    0 :::6378              :::*             LISTEN      8131/redis-server * </span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure>
<h3 id="5-8-whatis和ptype命令"><a href="#5-8-whatis和ptype命令" class="headerlink" title="5.8 whatis和ptype命令"></a>5.8 whatis和ptype命令</h3><p>   命令格式及功能：</p>
<ul>
<li><strong>whatis val</strong>，用于查看变量类型；</li>
<li><strong>ptype val</strong>，作用和 <strong>whatis</strong> 类似，但功能更强大，可以查看复合数据类型，会打印出该类型的成员变量。</li>
</ul>
<h3 id="5-9-thread命令"><a href="#5-9-thread命令" class="headerlink" title="5.9 thread命令"></a>5.9 thread命令</h3><p>   命令格式及作用：</p>
<ul>
<li><strong>info thread</strong>，查看当前进程的所有线程运行情况；</li>
<li><strong>thread 线程编号</strong>，切换到具体编号的线程上去；</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">14139:M 10 Nov 2020 22:55:24.849 * DB loaded from disk: 0.000 seconds</span><br><span class="line">14139:M 10 Nov 2020 22:55:24.849 * Ready to accept connections</span><br><span class="line">^C</span><br><span class="line">Thread 1 &quot;redis-server&quot; received signal SIGINT, Interrupt.</span><br><span class="line">0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">(gdb) info thread</span><br><span class="line">  Id   Target Id         Frame </span><br><span class="line">* 1    Thread 0x7ffff7feaf40 (LWP 14139) &quot;redis-server&quot; 0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">  2    Thread 0x7ffff176a700 (LWP 14140) &quot;redis-server&quot; 0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">  3    Thread 0x7fffeef69700 (LWP 14141) &quot;redis-server&quot; 0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">  4    Thread 0x7fffec768700 (LWP 14142) &quot;redis-server&quot; 0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">(gdb) thread 3</span><br><span class="line">[Switching to thread 3 (Thread 0x7fffeef69700 (LWP 14141))]</span><br><span class="line">#0  0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">(gdb) info thread</span><br><span class="line">  Id   Target Id         Frame </span><br><span class="line">  1    Thread 0x7ffff7feaf40 (LWP 14139) &quot;redis-server&quot; 0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">  2    Thread 0x7ffff176a700 (LWP 14140) &quot;redis-server&quot; 0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">* 3    Thread 0x7fffeef69700 (LWP 14141) &quot;redis-server&quot; 0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">  4    Thread 0x7fffec768700 (LWP 14142) &quot;redis-server&quot; 0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br></pre></td></tr></table></figure>
<p>   从以上可以看出，前面带 <em> 号的是当前所在线程，第一列 <strong>Id</strong> 指的是线程编号，后面括号中 <strong>LWP 14139</strong>，<strong>LWP（Light Weight Process）</strong>表示轻量级进程，即我们所说的线程，线程ID为 <em>*14139</em></em>。</p>
<p>   目前通过 <strong>info thread</strong> 可知redis-server一共启动了4个线程，其中1个主线程，3个工作线程，通过 <strong>bt</strong> 命令可知<strong>线程1是主线程</strong>，因为其调用堆栈最顶层是main函数。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Thread 1 &quot;redis-server&quot; received signal SIGINT, Interrupt.</span><br><span class="line">0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">(gdb) info thread</span><br><span class="line">  Id   Target Id         Frame </span><br><span class="line">* 1    Thread 0x7ffff7feaf40 (LWP 14139) &quot;redis-server&quot; 0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">  2    Thread 0x7ffff176a700 (LWP 14140) &quot;redis-server&quot; 0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">  3    Thread 0x7fffeef69700 (LWP 14141) &quot;redis-server&quot; 0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">  4    Thread 0x7fffec768700 (LWP 14142) &quot;redis-server&quot; 0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">(gdb) bt</span><br><span class="line">#0  0x00000038212e9243 in epoll_wait () from /lib64/libc.so.6</span><br><span class="line">#1  0x000000000042875e in aeApiPoll (tvp=&lt;optimized out&gt;, eventLoop=0x7ffff7a300a0) at ae_epoll.c:112</span><br><span class="line">#2  aeProcessEvents (eventLoop=0x7ffff7a300a0, flags=11) at ae.c:411</span><br><span class="line">#3  0x0000000000428bfb in aeMain (eventLoop=0x7ffff7a300a0) at ae.c:501</span><br><span class="line">#4  0x0000000000430d9e in main (argc=&lt;optimized out&gt;, argv=0x7fffffffe648) at server.c:4197</span><br><span class="line">(gdb) thread 2</span><br><span class="line">[Switching to thread 2 (Thread 0x7ffff176a700 (LWP 14140))]</span><br><span class="line">#0  0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">(gdb) bt</span><br><span class="line">#0  0x000000382160b68c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0</span><br><span class="line">#1  0x0000000000483346 in bioProcessBackgroundJobs (arg=0x0) at bio.c:176</span><br><span class="line">#2  0x0000003821607aa1 in start_thread () from /lib64/libpthread.so.0</span><br><span class="line">#3  0x00000038212e8c4d in clone () from /lib64/libc.so.6</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br></pre></td></tr></table></figure>
<h3 id="5-10-next、step命令"><a href="#5-10-next、step命令" class="headerlink" title="5.10 next、step命令"></a>5.10 next、step命令</h3><p>   <strong>next</strong> 和 <strong>step</strong> 都是单步执行，但也有差别：</p>
<ul>
<li><strong>next</strong> 是 <strong>单步步过（step over）</strong>，即遇到函数直接跳过，不进入函数内部。</li>
<li><strong>step</strong> 是 <strong>单步步入（step into）</strong>，即遇到函数会进入函数内部。</li>
</ul>
<h3 id="5-11-return、finish命令"><a href="#5-11-return、finish命令" class="headerlink" title="5.11 return、finish命令"></a>5.11 return、finish命令</h3><p>   <strong>return</strong> 和 <strong>finish</strong> 都是退出函数，但也有差别：</p>
<ul>
<li><strong>return</strong> 命令是立即退出当前函数，剩下的代码不会执行了，<strong>return</strong> 还可以指定函数的返回值。</li>
<li><strong>finish</strong> 命令是会继续执行完该函数剩余代码再正常退出。</li>
</ul>
<h3 id="5-12-until命令"><a href="#5-12-until命令" class="headerlink" title="5.12 until命令"></a>5.12 until命令</h3><p>   以下是GDB对 <strong>until</strong> 命令的解释：</p>
<blockquote>
<p> (gdb) help until Execute until the program reaches a source line  greater than the current or a specified location (same args as break  command) within the current frame.</p>
</blockquote>
<p>   该命令使得程序执行到指定位置停下来，命令参数和 <strong>break</strong> 命令一样。</p>
<h3 id="5-13-jump命令"><a href="#5-13-jump命令" class="headerlink" title="5.13 jump命令"></a>5.13 jump命令</h3><p>   命令格式及作用：</p>
<ul>
<li><strong>jump LineNo</strong>，跳转到代码的 <strong>LineNo</strong> 行的位置；</li>
<li><strong>jump +10</strong>，跳转到距离当前代码下10行的位置；</li>
<li><p><strong>jump *0x12345678</strong>，跳转到 <strong>0x12345678</strong> 地址的代码处，地址前要加星号；</p>
<p> <strong>jump</strong> 命令有两点需要注意的：</p>
</li>
</ul>
<ol>
<li>中间跳过的代码是不会执行的；</li>
<li>跳到的位置后如果没有断点，那么GDB会自动继续往后执行；</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;aaa&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">if</span> (a == <span class="number">0</span>)</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;hello&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;world&quot;</span> &lt;&lt; endl;    </span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;bbb&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   以上述代码为例，正常执行的输出为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">aaa</span><br><span class="line">hello</span><br><span class="line">bbb</span><br></pre></td></tr></table></figure>
<p>   使用 <strong>jump</strong> 命令跳到第 <strong>12</strong> 行：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Reading symbols from aaa...done.</span><br><span class="line">(gdb) b main</span><br><span class="line">Breakpoint 1 at 0x400880: file aaa.cpp, line 7.</span><br><span class="line">(gdb) r</span><br><span class="line">Starting program: /opt/test/aaa </span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at aaa.cpp:7</span><br><span class="line">7       int a = 0;</span><br><span class="line">(gdb) jump 12</span><br><span class="line">Continuing at 0x4008c7.</span><br><span class="line">world</span><br><span class="line">bbb</span><br><span class="line">[Inferior 1 (process 14716) exited normally]</span><br></pre></td></tr></table></figure>
<h3 id="5-14-disassemble命令"><a href="#5-14-disassemble命令" class="headerlink" title="5.14 disassemble命令"></a>5.14 disassemble命令</h3><p>   该命令用于查看某段代码的汇编指令。</p>
<h3 id="5-15-set-args-和-show-args命令"><a href="#5-15-set-args-和-show-args命令" class="headerlink" title="5.15 set args 和 show args命令"></a>5.15 set args 和 show args命令</h3><p>   很多程序启动需要我们传递参数，<strong>set args</strong> 就是用来设置程序启动参数的，<strong>show args</strong> 命令用来查询通过 <strong>set args</strong> 设置的参数，命令格式：</p>
<ul>
<li><strong>set args args1</strong>，设置单个启动参数 <strong>args1</strong>；</li>
<li><strong>set args “-p”  “password”</strong>，如果单个参数之间有空格，可以使用引号将参数包裹起来；</li>
<li><strong>set args args1 args2 args3</strong>，设置多个启动参数，参数之间用空格隔开；</li>
<li><strong>set args</strong>，不带参数，则清除之前设置的参数；</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Reading symbols from redis-server...done.</span><br><span class="line">(gdb) show args</span><br><span class="line">Argument list to give program being debugged when it is started is &quot;&quot;.</span><br><span class="line">(gdb) set args ../redis.conf</span><br><span class="line">(gdb) show args</span><br><span class="line">Argument list to give program being debugged when it is started is &quot;../redis.conf&quot;.</span><br><span class="line">(gdb) set args</span><br><span class="line">(gdb) show args</span><br><span class="line">Argument list to give program being debugged when it is started is &quot;&quot;.</span><br><span class="line">(gdb) set args ../redis.conf</span><br><span class="line">(gdb) r</span><br><span class="line">Starting program: /data/redis-5.0.3/src/redis-server ../redis.conf</span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">Using host libthread_db library &quot;/lib64/libthread_db.so.1&quot;.</span><br><span class="line">15046:C 11 Nov 2020 01:24:31.573 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br><span class="line">Reading symbols from redis-cli...done.</span><br><span class="line">(gdb) show args</span><br><span class="line">Argument list to give program being debugged when it is started is &quot;&quot;.</span><br><span class="line">(gdb) set args &quot;-p&quot; &quot;6378&quot;</span><br><span class="line">(gdb) show args</span><br><span class="line">Argument list to give program being debugged when it is started is &quot;&quot;-p&quot; &quot;6378&quot;&quot;.</span><br><span class="line">(gdb) r</span><br><span class="line">Starting program: /data/redis-5.0.3/src/redis-cli &quot;-p&quot; &quot;6378&quot;</span><br><span class="line">[Thread debugging using libthread_db enabled]</span><br><span class="line">Using host libthread_db library &quot;/lib64/libthread_db.so.1&quot;.</span><br><span class="line">127.0.0.1:6378&gt;</span><br></pre></td></tr></table></figure>
<h3 id="5-16-tbreak命令"><a href="#5-16-tbreak命令" class="headerlink" title="5.16 tbreak命令"></a>5.16 tbreak命令</h3><p>   该命令时添加一个临时断点，断点一旦被触发就自动删除，使用方法同 <strong>break</strong>。</p>
<h3 id="5-17-watch命令"><a href="#5-17-watch命令" class="headerlink" title="5.17 watch命令"></a>5.17 watch命令</h3><p>   <strong>watch</strong> 命令用来监视一个变量或者一段内存，当这个变量或者内存的值发生变化时，GDB就会中断下来。被监视的某个变量或内存地址会产生一个 <strong>watch point（观察点）</strong>。</p>
<p>   命令格式：</p>
<ul>
<li><strong>watch 整型变量</strong>；</li>
<li><strong>watch 指针变量</strong>，监视的是指针变量本身；</li>
<li><strong>watch *指针变量</strong>，监视的是指针所指的内容；</li>
<li><strong>watch 数组变量或内存区间</strong>；</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> std::cout;</span><br><span class="line"><span class="keyword">using</span> std::endl;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">    a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> * p;</span><br><span class="line">    *p = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> * q;</span><br><span class="line">    q = p;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> c[<span class="number">5</span>];</span><br><span class="line">    c[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    c[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    c[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">    c[<span class="number">3</span>] = <span class="number">1</span>;</span><br><span class="line">    c[<span class="number">4</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   对于以上代码，通过 <strong>watch</strong> 命令分别对变量 <strong>a、*p、q、c</strong> 进行监视：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">Reading symbols from aaa...done.</span><br><span class="line">(gdb) b main</span><br><span class="line">Breakpoint 1 at 0x4006ec: file aaa.cpp, line 7.</span><br><span class="line">(gdb) r</span><br><span class="line">Starting program: /opt/test/aaa </span><br><span class="line"></span><br><span class="line">Breakpoint 1, main () at aaa.cpp:7</span><br><span class="line">7       int a = 0;</span><br><span class="line">(gdb) watch a</span><br><span class="line">Hardware watchpoint 2: a</span><br><span class="line">(gdb) watch *p</span><br><span class="line">Hardware watchpoint 3: *p</span><br><span class="line">(gdb) watch q</span><br><span class="line">Hardware watchpoint 4: q</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Hardware watchpoint 2: a</span><br><span class="line"></span><br><span class="line">Old value = 0</span><br><span class="line">New value = 10</span><br><span class="line">main () at aaa.cpp:11</span><br><span class="line">11      *p = 5;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Hardware watchpoint 3: *p</span><br><span class="line"></span><br><span class="line">Old value = 1</span><br><span class="line">New value = 5</span><br><span class="line">main () at aaa.cpp:14</span><br><span class="line">14      q = p;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Hardware watchpoint 4: q</span><br><span class="line"></span><br><span class="line">Old value = (int *) 0x400580 &lt;_start&gt;</span><br><span class="line">New value = (int *) 0x7fffffffe680</span><br><span class="line">main () at aaa.cpp:17</span><br><span class="line">17      c[0] = 1;</span><br><span class="line">(gdb) info watch</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">2       hw watchpoint  keep y                      a</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">3       hw watchpoint  keep y                      *p</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">4       hw watchpoint  keep y                      q</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">(gdb) del 2</span><br><span class="line">(gdb) del 3</span><br><span class="line">(gdb) info watch</span><br><span class="line">Num     Type           Disp Enb Address            What</span><br><span class="line">4       hw watchpoint  keep y                      q</span><br><span class="line">    breakpoint already hit 1 time</span><br><span class="line">(gdb) watch c</span><br><span class="line">Hardware watchpoint 5: c</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Hardware watchpoint 5: c</span><br><span class="line"></span><br><span class="line">Old value = &#123;555809696, 56, 4196256, 0, 0&#125;</span><br><span class="line">New value = &#123;1, 56, 4196256, 0, 0&#125;</span><br><span class="line">main () at aaa.cpp:18</span><br><span class="line">18      c[1] = 1;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Hardware watchpoint 5: c</span><br><span class="line"></span><br><span class="line">Old value = &#123;1, 56, 4196256, 0, 0&#125;</span><br><span class="line">New value = &#123;1, 1, 4196256, 0, 0&#125;</span><br><span class="line">main () at aaa.cpp:19</span><br><span class="line">19      c[2] = 1;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Hardware watchpoint 5: c</span><br><span class="line"></span><br><span class="line">Old value = &#123;1, 1, 4196256, 0, 0&#125;</span><br><span class="line">New value = &#123;1, 1, 1, 0, 0&#125;</span><br><span class="line">main () at aaa.cpp:20</span><br><span class="line">20      c[3] = 1;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Hardware watchpoint 5: c</span><br><span class="line"></span><br><span class="line">Old value = &#123;1, 1, 1, 0, 0&#125;</span><br><span class="line">New value = &#123;1, 1, 1, 1, 0&#125;</span><br><span class="line">main () at aaa.cpp:21</span><br><span class="line">21      c[4] = 1;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Hardware watchpoint 5: c</span><br><span class="line"></span><br><span class="line">Old value = &#123;1, 1, 1, 1, 0&#125;</span><br><span class="line">New value = &#123;1, 1, 1, 1, 1&#125;</span><br><span class="line">main () at aaa.cpp:23</span><br><span class="line">23      return 0;</span><br><span class="line">(gdb) c</span><br><span class="line">Continuing.</span><br><span class="line"></span><br><span class="line">Watchpoint 4 deleted because the program has left the block in</span><br><span class="line">which its expression is valid.</span><br><span class="line"></span><br><span class="line">Watchpoint 5 deleted because the program has left the block in</span><br><span class="line">which its expression is valid.</span><br><span class="line">0x000000382121ed20 in __libc_start_main () from /lib64/libc.so.6</span><br><span class="line">(gdb)</span><br></pre></td></tr></table></figure>
<p>   当 <strong>watch</strong> 的变量或内存因超出作用域失效时，GDB 会有如下提示信息：</p>
<blockquote>
<p> Watchpoint 4 deleted because the program has left the block in which its expression is valid.</p>
</blockquote>
<p>   通过 <strong>info watch</strong> 命令可以查看当前所有监视的变量，通过 <strong>delete watch编号</strong> 可以删除对某个变量的监视。</p>
<h3 id="5-18-call命令"><a href="#5-18-call命令" class="headerlink" title="5.18 call命令"></a>5.18 call命令</h3><p>   命令格式及作用：</p>
<ul>
<li><strong>call func()</strong>，执行 <strong>func()</strong> 函数，同 <strong>print func()</strong>。</li>
</ul>
<h3 id="5-19-help命令"><a href="#5-19-help命令" class="headerlink" title="5.19 help命令"></a>5.19 help命令</h3><p>   通过 <strong>help</strong> 命令可以查看目标命令的具体用法。</p>
<h2 id="6-GDB多线程调试"><a href="#6-GDB多线程调试" class="headerlink" title="6. GDB多线程调试"></a>6. GDB多线程调试</h2><h3 id="6-1-概述"><a href="#6-1-概述" class="headerlink" title="6.1 概述"></a>6.1 概述</h3><p>   多线程程序的编写更容易产生异常或  Bug（例如线程之间因竞争同一资源发生了死锁、多个线程同时对同一资源进行读和写等等）。GDB调试器不仅仅支持调试单线程程序，还支持调试多线程程序。本质上讲，使用GDB调试多线程程序的过程和调试单线程程序类似，不同之处在于，调试多线程程序需要监控多个线程的执行过程。</p>
<p>   用GDB调试多线程程序时，该程序的编译需要添加  <strong><code>-lpthread</code></strong> 参数。</p>
<h3 id="6-2-一些命令"><a href="#6-2-一些命令" class="headerlink" title="6.2 一些命令"></a>6.2 一些命令</h3><ol>
<li><strong>info thread</strong>，查看当前调试程序启动了多少个线程，并打印出各个线程信息；</li>
<li><strong>thread 线程编号</strong>，将该编号的线程切换为当前线程；</li>
<li><strong>thread apply 线程编号1 线程编号2 … command</strong>，将GDB命令作用指定对应编号的线程，可以指定多个线程，若要指定所有线程，用 <strong>all</strong> 替换线程编号；</li>
<li><strong>break location thread 线程编号</strong>，在 <strong>location</strong> 位置设置普通断点，该断点只作用在特定编号的线程上；</li>
</ol>
<h3 id="6-3-一些术语"><a href="#6-3-一些术语" class="headerlink" title="6.3 一些术语"></a>6.3 一些术语</h3><ul>
<li><p><strong>all-stop mode</strong>，全停模式，当程序由于任何原因在GDB下停止时，不止当前的线程停止，所有的执行线程都停止。这样允许你检查程序的整体状态，包括线程切换，不用担心当下会有什么改变。</p>
</li>
<li><p><strong>non-stop mode</strong>，不停模式，调试器（如VS2008和老版本的GDB）往往只支持 <strong>all-stop</strong> 模式，但在某些场景中，我们可能需要调试个别的线程，并且不想在调试过程中影响其他线程的运行，这样可以把GDB的调式模式由 <strong>all-stop</strong> 改成 <strong>non-stop</strong>，<strong>7.0</strong> 版本的GDB引入了 <strong>non-stop</strong> 模式。在 <strong>non-stop</strong> 模式下 <strong>continue、next、step</strong> 命令只针对当前线程。</p>
</li>
<li><p><strong>record mode</strong>，记录模式；</p>
</li>
<li><p><strong>replay mode</strong>，回放模式；</p>
</li>
<li><p><strong>scheduler-locking</strong> ，调度锁；</p>
</li>
</ul>
<blockquote>
<p> (gdb) help set scheduler-locking Set mode for locking scheduler during  execution. off    == no locking (threads may preempt at any time) on     == full locking (no thread except the current thread may run)         This applies to both normal execution and replay mode. step   ==  scheduler locked during stepping commands (step, next, stepi, nexti).        In this mode, other threads may run during other commands.         This applies to both normal execution and replay mode. replay ==  scheduler locked in replay mode and unlocked during normal execution.</p>
</blockquote>
<ul>
<li><strong>schedule-multiple</strong>，多进程调度；</li>
</ul>
<blockquote>
<p> (gdb) help set schedule-multiple Set mode for resuming threads of all  processes. When on, execution commands (such as ‘continue’ or ‘next’)  resume all threads of all processes.  When off (which is the default),  execution commands only resume the threads of the current process.  The  set of threads that are resumed is further refined by the  scheduler-locking mode (see help set scheduler-locking).</p>
</blockquote>
<h3 id="6-4-设置线程锁"><a href="#6-4-设置线程锁" class="headerlink" title="6.4 设置线程锁"></a>6.4 设置线程锁</h3><p>   使用GDB调试多线程程序时，默认的调试模式是：<strong>一个线程暂停运行，其他线程也随即暂停；一个线程启动运行，其他线程也随即启动</strong>。但在一些场景中，我们希望只让特定线程运行，其他线程都维持在暂停状态，即要防止<strong>线程切换</strong>，要达到这种效果，需要借助 <strong>set scheduler-locking</strong> 命令。</p>
<p>   命令格式及作用：</p>
<ul>
<li><strong>set scheduler-locking on</strong>，锁定线程，只有当前或指定线程可以运行；</li>
<li><strong>set scheduler-locking off</strong>，不锁定线程，会有线程切换；</li>
<li><strong>set scheduler-locking step</strong>，当单步执行某一线程时，其他线程不会执行，同时保证在调试过程中当前线程不会发生改变。但如果在该模式下执行 <strong>continue、until、finish</strong> 命令，则其他线程也会执行；</li>
<li><strong>show scheduler-locking</strong>，查看线程锁定状态；</li>
</ul>
<h2 id="7-gdbinit"><a href="#7-gdbinit" class="headerlink" title="7 .gdbinit"></a>7 .gdbinit</h2><p><code>.gdbinit</code>是一个GDB初始化脚本文件，它可以包含在用户主目录或当前工作目录中，用于在启动GDB时自动加载指令和设置。</p>
<p><code>.gdbinit</code>文件在启动GDB时会自动加载，并执行其中的指令。这样，你不必每次手动输入相同的指令，可以方便地自定义GDB的行为。</p>
<p>要使用<code>.gdbinit</code>文件，只需按照以下步骤进行操作：</p>
<ol>
<li>创建一个文本文件，并将其命名为<code>.gdbinit</code>。请注意，文件名以点开头，并且没有文件扩展名。</li>
<li>编辑<code>.gdbinit</code>文件，添加你希望在GDB启动时自动执行的指令和设置。每条指令占据一行。</li>
<li>保存<code>.gdbinit</code>文件。</li>
</ol>
<p>以下是一个简单的示例，演示如何在<code>.gdbinit</code>中设置断点和显示变量的值：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 设置断点</span><br><span class="line">break main</span><br><span class="line"></span><br><span class="line"># 当断点被命中时显示变量的值</span><br><span class="line">display variable_name</span><br></pre></td></tr></table></figure>
<p>在上述示例中，<code>.gdbinit</code>文件设置了一个断点在主函数（<code>main</code>）处，然后使用<code>display</code>命令来显示名为<code>variable_name</code>的变量的值。</p>
<p><code>.gdbinit</code>文件可以放置在用户主目录或当前工作目录中。当启动GDB时，它会自动在这些位置进行搜索和加载。</p>
<ol>
<li>用户主目录：将<code>.gdbinit</code>文件放置在用户主目录下（Windows系统中通常是<code>C:\Users\用户名</code>，Linux和macOS系统中通常是<code>/home/用户名</code>）。</li>
<li>当前工作目录：将<code>.gdbinit</code>文件放置在你希望执行GDB命令的当前工作目录中。</li>
</ol>
<p>GDB会首先在用户主目录中搜索并加载<code>.gdbinit</code>文件，如果找到了就会执行其中的指令。如果在用户主目录中没有找到<code>.gdbinit</code>文件，GDB会继续在当前工作目录中搜索并加载。</p>
<p>如果你在用户主目录和当前工作目录中都有一个<code>.gdbinit</code>文件，GDB会加载并执行两个文件中的指令，其中当前工作目录中的<code>.gdbinit</code>文件的指令优先于用户主目录中的。</p>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p><a target="_blank" rel="noopener" href="http://www.gnu.org/software/gdb/documentation/">官方参考文档</a> </p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>奔跑的IC
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://example.com/C_C++/GDB%E4%BD%BF%E7%94%A8/" title="GDB使用">http://example.com/C_C++/GDB使用/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C</a>
              <a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C++</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/C_C++/%E4%BD%BF%E7%94%A8ld%E7%9A%84wrap%E9%80%89%E9%A1%B9%E6%9B%BF%E6%8D%A2%E5%B7%B2%E6%9C%89%E5%BA%93%E5%87%BD%E6%95%B0/" rel="prev" title="使用ld的wrap选项替换已有库函数">
                  <i class="fa fa-chevron-left"></i> 使用ld的wrap选项替换已有库函数
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/C_C++/gcc/" rel="next" title="gcc">
                  gcc <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">奔跑的IC</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div><script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://lib.baomitu.com/canvas-nest.js/1.0.1/canvas-nest.js"></script>


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"zmurder","repo":"zmurder.github.io","client_id":"cf2343f27b6c29efe0bc","client_secret":"3268a1fa92706c7358d5421f88f76a0f7ada3188","admin_user":"zmurder","distraction_free_mode":true,"proxy":"https://strong-caramel-969805.netlify.app/github_access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"4b69c791ac0f7b34f1cfd332fc38e782"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
