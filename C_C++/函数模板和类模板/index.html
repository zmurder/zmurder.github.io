<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8693861384618000"
     crossorigin="anonymous"></script>
  <meta name="msvalidate.01" content="7EC20DBC74B004C2782077570E15C280">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha256-Z1K5uhUaJXA7Ll0XrZ/0JhX4lAtZFpT6jkKrEDT0drU=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.14.2","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8693861384618000"
     crossorigin="anonymous"></script>
    <meta name="description" content="简介C++提供了模板(template)编程的概念。所谓模板，实际上是建立一个通用函数或类，其类内部的类型和函数的形参类型不具体指定，用一个虚拟的类型来代表。这种通用的方式称为模板。模板是泛型编程的基础,泛型编程即以一种独立于任何特定类型的方式编写代码。">
<meta property="og:type" content="article">
<meta property="og:title" content="函数模板和类模板">
<meta property="og:url" content="http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/index.html">
<meta property="og:site_name" content="奔跑的IC">
<meta property="og:description" content="简介C++提供了模板(template)编程的概念。所谓模板，实际上是建立一个通用函数或类，其类内部的类型和函数的形参类型不具体指定，用一个虚拟的类型来代表。这种通用的方式称为模板。模板是泛型编程的基础,泛型编程即以一种独立于任何特定类型的方式编写代码。">
<meta property="og:locale">
<meta property="og:image" content="http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/v2-ee3f75cdb666eda175be99522313c0e9_720w.webp">
<meta property="og:image" content="http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/v2-b042318ffc49d89186e351a518b506fa_720w.webp">
<meta property="og:image" content="http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/v2-009b42ba9b1a599e1b1985ff3efdc38d_720w.webp">
<meta property="og:image" content="http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/v2-cdb24db3f74f354f3b5334edd5884c63_720w.webp">
<meta property="article:published_time" content="2024-12-01T10:13:44.403Z">
<meta property="article:modified_time" content="2024-12-01T10:13:44.403Z">
<meta property="article:author" content="奔跑的IC">
<meta property="article:tag" content="C">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/v2-ee3f75cdb666eda175be99522313c0e9_720w.webp">


<link rel="canonical" href="http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-Hans","comments":true,"permalink":"http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/","path":"C_C++/函数模板和类模板/","title":"函数模板和类模板"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>函数模板和类模板 | 奔跑的IC</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">奔跑的IC</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-reorder fa-fw"></i>文章列表</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-text">简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF"><span class="nav-text">1 函数模板</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF"><span class="nav-text">1.1 为什么要有函数模板</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="nav-text">1.2 函数模板的语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-1-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-text">1.2.1 基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-2-%E5%A4%9A%E4%B8%AA%E6%A8%A1%E6%9D%BF%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="nav-text">1.2.2 多个模板参数：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-3-%E9%9D%9E%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="nav-text">1.2.3 非类型参数：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-4-%E6%98%BE%E5%BC%8F%E7%B1%BB%E5%9E%8B%E8%B0%83%E7%94%A8%EF%BC%9A"><span class="nav-text">1.2.4 显式类型调用：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-5-%E6%A8%A1%E6%9D%BF%E7%89%B9%E5%8C%96%EF%BC%9A"><span class="nav-text">1.2.5 模板特化：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-6-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E9%87%8D%E8%BD%BD%EF%BC%9A"><span class="nav-text">1.2.6 函数模板重载：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E7%B1%BB%E6%A8%A1%E6%9D%BF"><span class="nav-text">2 类模板</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="nav-text">2.1  类模板的定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%BE%8B%E5%AD%90"><span class="nav-text">2.2 类模板例子</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E4%BD%9C%E4%B8%BA%E7%B1%BB%E6%A8%A1%E6%9D%BF%E6%88%90%E5%91%98"><span class="nav-text">2.3 函数模板作为类模板成员</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%8E%E9%9D%9E%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="nav-text">2.4 类模板与非类型参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%8E%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F"><span class="nav-text">2.5 类模板与静态成员变量</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%8E%E6%B4%BE%E7%94%9F"><span class="nav-text">3 类模板与派生</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%BB%8E%E7%B1%BB%E6%A8%A1%E6%9D%BF%E6%B4%BE%E7%94%9F"><span class="nav-text">3.1 类模板从类模板派生</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%BB%8E%E6%A8%A1%E6%9D%BF%E7%B1%BB%E6%B4%BE%E7%94%9F"><span class="nav-text">3.2 类模板从模板类派生</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%BB%8E%E6%99%AE%E9%80%9A%E7%B1%BB%E6%B4%BE%E7%94%9F"><span class="nav-text">3.3 类模板从普通类派生</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-%E6%99%AE%E9%80%9A%E7%B1%BB%E4%BB%8E%E6%A8%A1%E6%9D%BF%E7%B1%BB%E6%B4%BE%E7%94%9F"><span class="nav-text">3.4 普通类从模板类派生</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%B8%8E%E5%8F%8B%E5%85%83"><span class="nav-text">4 类模板与友元</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-%E5%87%BD%E6%95%B0%E3%80%81%E7%B1%BB%E3%80%81%E7%B1%BB%E7%9A%84%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E7%B1%BB%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%8F%8B%E5%85%83"><span class="nav-text">4.1  函数、类、类的成员函数作为类模板的友元</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E4%BD%9C%E4%B8%BA%E7%B1%BB%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%8F%8B%E5%85%83"><span class="nav-text">4.2 函数模板作为类模板的友元</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E4%BD%9C%E4%B8%BA%E7%B1%BB%E7%9A%84%E5%8F%8B%E5%85%83"><span class="nav-text">4.3 函数模板作为类的友元</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-%E7%B1%BB%E6%A8%A1%E6%9D%BF%E4%BD%9C%E4%B8%BA%E7%B1%BB%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%8F%8B%E5%85%83"><span class="nav-text">4.4 类模板作为类模板的友元</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%84%E5%BD%95%EF%BC%9A"><span class="nav-text">附录：</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="奔跑的IC"
      src="/images/zyd.gif">
  <p class="site-author-name" itemprop="name">奔跑的IC</p>
  <div class="site-description" itemprop="description">死磕牛角的IT农民工</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">156</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zyd.gif">
      <meta itemprop="name" content="奔跑的IC">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="奔跑的IC">
      <meta itemprop="description" content="死磕牛角的IT农民工">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="函数模板和类模板 | 奔跑的IC">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          函数模板和类模板
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-12-01 18:13:44" itemprop="dateCreated datePublished" datetime="2024-12-01T18:13:44+08:00">2024-12-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/C-C/" itemprop="url" rel="index"><span itemprop="name">C_C++</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>C++提供了模板(template)编程的概念。所谓模板，实际上是建立一个通用函数或类，其类内部的类型和函数的形参类型不具体指定，用一个虚拟的类型来代表。这种通用的方式称为模板。模板是泛型编程的基础,泛型编程即以一种独立于任何特定类型的方式编写代码。</p>
<h1 id="1-函数模板"><a href="#1-函数模板" class="headerlink" title="1 函数模板"></a>1 函数模板</h1><h2 id="1-1-为什么要有函数模板"><a href="#1-1-为什么要有函数模板" class="headerlink" title="1.1 为什么要有函数模板"></a>1.1 为什么要有函数模板</h2><p>例如，在一个项目中，需要实现函数返回两个入参的最大值，要支持参数类型为int、float、char等类型的变量。根据需求编写出下面的代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">//比较int 类型</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Max</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//比较char 类型</span></span><br><span class="line"><span class="function"><span class="type">char</span> <span class="title">Max</span><span class="params">(<span class="type">char</span> a, <span class="type">char</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//比较float 类型</span></span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">Max</span><span class="params">(<span class="type">float</span> a, <span class="type">float</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span>  n = <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span>	 m = <span class="number">2</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;max(1, 2) = &quot;</span> &lt;&lt; <span class="built_in">Max</span>(n, m) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">float</span> a = <span class="number">2.0</span>;</span><br><span class="line">	<span class="type">float</span> b = <span class="number">3.0</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;max(2.0, 3.0) = &quot;</span> &lt;&lt; <span class="built_in">Max</span>(a, b) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="type">char</span> i = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">	<span class="type">char</span> j = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;max(&#x27;a&#x27;, &#x27;b&#x27;) = &quot;</span> &lt;&lt; <span class="built_in">Max</span>(i, j) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码需要编写多个函数，但是函数内部的实现都是类似的。实际上我们使用函数模板一个就可以解决。</p>
<p>使用函数模板修改上面的实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">Max</span> <span class="params">(T a ,T b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> m = <span class="number">2</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Max(1,2)=&quot;</span> &lt;&lt; <span class="built_in">Max</span>(n,m) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">float</span> nf = <span class="number">1.0</span>;</span><br><span class="line">    <span class="type">float</span> mf = <span class="number">2.0</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Max(1.0,2.0)=&quot;</span>&lt;&lt; <span class="built_in">Max</span>(nf,mf) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> nc = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    <span class="type">char</span> mc = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Max(&#x27;a&#x27;, &#x27;b&#x27;)=&quot;</span> &lt;&lt; <span class="built_in">Max</span>(nc,mc) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-2-函数模板的语法"><a href="#1-2-函数模板的语法" class="headerlink" title="1.2 函数模板的语法"></a>1.2 函数模板的语法</h2><p>函数模板是 C++ 中一种用于创建通用函数的机制，允许你编写可以处理不同数据类型的通用代码。以下是函数模板的基本语法和一些关键概念：</p>
<h3 id="1-2-1-基本语法"><a href="#1-2-1-基本语法" class="headerlink" title="1.2.1 基本语法"></a>1.2.1 基本语法</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">functionName</span><span class="params">(T parameter1, T parameter2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 模板函数的实现</span></span><br><span class="line">    <span class="comment">// 使用 T 作为通用数据类型</span></span><br><span class="line">    <span class="comment">// 使用 parameter1 和 parameter2 来进行操作</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><code>template &lt;typename T&gt;</code>: 这是函数模板的声明部分，<code>typename</code> 关键字用于指定通用数据类型，<code>T</code> 是一个模板参数（可以使用其他标识符代替，如 <code>class</code>）。</li>
<li><code>T functionName(T parameter1, T parameter2)</code>: 这是函数模板的定义部分，<code>T</code> 表示函数参数和返回值的通用数据类型。</li>
<li>实现部分: 在函数模板的实现部分，你可以使用 <code>T</code> 作为通用数据类型，并在函数体内对参数进行操作。</li>
</ul>
<p>以下是一个简单的示例，演示了函数模板的语法：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">add</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 使用函数模板</span></span><br><span class="line">    <span class="type">int</span> sum1 = <span class="built_in">add</span>(<span class="number">5</span>, <span class="number">10</span>);       <span class="comment">// T 推断为 int</span></span><br><span class="line">    <span class="type">double</span> sum2 = <span class="built_in">add</span>(<span class="number">3.5</span>, <span class="number">7.2</span>); <span class="comment">// T 推断为 double</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 显式类型调用</span></span><br><span class="line">    <span class="type">double</span> sum3 = <span class="built_in">add</span>&lt;<span class="type">double</span>&gt;(<span class="number">2</span>, <span class="number">3.5</span>);</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Sum1: &quot;</span> &lt;&lt; sum1 &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Sum2: &quot;</span> &lt;&lt; sum2 &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Sum3: &quot;</span> &lt;&lt; sum3 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个例子演示了一个简单的函数模板 <code>add</code>，用于执行加法操作，可以处理不同的数据类型。</p>
<h3 id="1-2-2-多个模板参数："><a href="#1-2-2-多个模板参数：" class="headerlink" title="1.2.2 多个模板参数："></a>1.2.2 多个模板参数：</h3><p>你也可以使用多个模板参数，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="function">T1 <span class="title">functionName</span><span class="params">(T1 parameter1, T2 parameter2)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 函数模板的实现</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面是一个使用多个模板参数的函数模板示例，同时演示了显式类型指定和隐式类型推断：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多个模板参数的函数模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="function">T1 <span class="title">addAndConvert</span><span class="params">(T1 a, T2 b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">static_cast</span>&lt;T1&gt;(a + b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 使用显式类型指定</span></span><br><span class="line">    <span class="type">int</span> result1 = <span class="built_in">addAndConvert</span>&lt;<span class="type">int</span>, <span class="type">double</span>&gt;(<span class="number">5</span>, <span class="number">3.5</span>);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Result1: &quot;</span> &lt;&lt; result1 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 隐式类型推断</span></span><br><span class="line">    <span class="type">double</span> result2 = <span class="built_in">addAndConvert</span>(<span class="number">2.5</span>, <span class="number">3</span>);</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Result2: &quot;</span> &lt;&lt; result2 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，<code>addAndConvert</code> 是一个接受两个模板参数的函数模板，其中 <code>T1</code> 是返回类型，而 <code>T2</code> 是第二个参数的类型。在 <code>main</code> 函数中演示了两种调用方式：</p>
<ol>
<li>使用显式类型指定：<code>addAndConvert&lt;int, double&gt;(5, 3.5)</code>，其中明确指定了 <code>T1</code> 为 <code>int</code> 和 <code>T2</code> 为 <code>double</code>。</li>
<li>隐式类型推断：<code>addAndConvert(2.5, 3)</code>，编译器根据传递的参数类型自动推断了模板参数类型。</li>
</ol>
<p>这种灵活性允许你在需要时明确指定模板参数，同时在一些情况下允许编译器根据上下文进行类型推断。</p>
<h3 id="1-2-3-非类型参数："><a href="#1-2-3-非类型参数：" class="headerlink" title="1.2.3 非类型参数："></a>1.2.3 非类型参数：</h3><p>除了通用数据类型，你还可以在模板中使用非类型参数，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="type">int</span> N&gt;</span><br><span class="line"><span class="function">T <span class="title">arraySum</span><span class="params">(T arr[N])</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 函数模板的实现</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面是一个示例</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="type">int</span> N&gt;</span><br><span class="line"><span class="function">T <span class="title">arraySum</span><span class="params">(T arr[N])</span> </span>&#123;</span><br><span class="line">    T sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; ++i) &#123;</span><br><span class="line">        sum += arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> intArray[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="type">double</span> doubleArray[] = &#123;<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>, <span class="number">4.4</span>, <span class="number">5.5</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 非类型参数 N 为数组大小</span></span><br><span class="line">    <span class="type">int</span> intSum = <span class="built_in">arraySum</span>&lt;<span class="type">int</span>, <span class="number">5</span>&gt;(intArray);</span><br><span class="line">    <span class="type">double</span> doubleSum = <span class="built_in">arraySum</span>&lt;<span class="type">double</span>, <span class="number">5</span>&gt;(doubleArray);</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Int Array Sum: &quot;</span> &lt;&lt; intSum &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Double Array Sum: &quot;</span> &lt;&lt; doubleSum &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在这个例子中，<code>arraySum</code> 是一个带有非类型参数 <code>N</code> 的函数模板，用于计算数组的总和。通过指定数组的大小作为非类型参数，可以在编译时确定数组的大小。</p>
<h3 id="1-2-4-显式类型调用："><a href="#1-2-4-显式类型调用：" class="headerlink" title="1.2.4 显式类型调用："></a>1.2.4 显式类型调用：</h3><p>你可以使用显式类型调用来手动指定模板参数，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> result = <span class="built_in">functionName</span>&lt;<span class="type">int</span>&gt;(<span class="number">5</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p>这允许你明确指定 <code>T</code> 的类型。</p>
<h3 id="1-2-5-模板特化："><a href="#1-2-5-模板特化：" class="headerlink" title="1.2.5 模板特化："></a>1.2.5 模板特化：</h3><p>你可以为特定类型提供模板的特殊实现，这称为模板特化，例如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="function"><span class="type">char</span> <span class="title">functionName</span><span class="params">(<span class="type">char</span> a, <span class="type">char</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 特化的实现</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，你可以为特定类型定制特殊的函数实现。</p>
<p>下面是一个模板特化的示例</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 通用的函数模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">add</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板特化，为 char 类型提供定制实现</span></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="function"><span class="type">char</span> <span class="title">add</span><span class="params">(<span class="type">char</span> a, <span class="type">char</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">tolower</span>(a) + std::<span class="built_in">tolower</span>(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> sum1 = <span class="built_in">add</span>(<span class="number">5</span>, <span class="number">10</span>);       <span class="comment">// 使用通用的模板函数</span></span><br><span class="line">    <span class="type">double</span> sum2 = <span class="built_in">add</span>(<span class="number">3.5</span>, <span class="number">7.2</span>); <span class="comment">// 使用通用的模板函数</span></span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> charSum = <span class="built_in">add</span>(<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>); <span class="comment">// 使用特化的实现，将字符转换为小写再相加</span></span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Sum1: &quot;</span> &lt;&lt; sum1 &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Sum2: &quot;</span> &lt;&lt; sum2 &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Char Sum: &quot;</span> &lt;&lt; charSum &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在这个例子中，<code>add</code> 函数模板具有通用的实现，然后通过模板特化，为 <code>char</code> 类型提供了一个特殊的实现，将字符转换为小写再相加。</p>
<h3 id="1-2-6-函数模板重载："><a href="#1-2-6-函数模板重载：" class="headerlink" title="1.2.6 函数模板重载："></a>1.2.6 函数模板重载：</h3><p>函数模板的重载指的是可以定义多个函数模板，其模板参数数量、类型或非类型参数的组合不同。通过重载函数模板，你可以为不同的情况提供特定的实现，以满足各种参数类型的需求。</p>
<p>以下是一个简单的函数模板重载的例子：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板函数重载，处理两个相同类型的参数</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">add</span><span class="params">(T a, T b)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Adding two values of the same type.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模板函数重载，处理两个不同类型的参数</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">add</span><span class="params">(T1 a, T2 b)</span> -&gt; <span class="title">decltype</span><span class="params">(a + b)</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Adding two values of different types.&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> result1 = <span class="built_in">add</span>(<span class="number">5</span>, <span class="number">10</span>);        <span class="comment">// 调用第一个模板函数</span></span><br><span class="line">    <span class="type">double</span> result2 = <span class="built_in">add</span>(<span class="number">3.5</span>, <span class="number">7</span>);    <span class="comment">// 调用第二个模板函数</span></span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Result1: &quot;</span> &lt;&lt; result1 &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Result2: &quot;</span> &lt;&lt; result2 &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上述例子中，我们定义了两个函数模板 <code>add</code>，一个处理两个相同类型的参数，另一个处理两个不同类型的参数。通过这样的方式，我们可以在不同的情况下提供不同的实现。</p>
<p>需要注意的是，C++ 编译器会根据调用时提供的参数类型和数量，选择匹配的函数模板。在上述例子中，<code>add(5, 10)</code> 调用了第一个函数模板，而 <code>add(3.5, 7)</code> 调用了第二个函数模板。</p>
<p>这种函数模板的重载机制使得你可以根据不同的参数情况提供更灵活的实现，以适应各种使用场景。</p>
<p>在上面的函数模板中，<code>auto add(T1 a, T2 b) -&gt; decltype(a + b)</code> 是一种使用尾返回类型（trailing return type）的写法，用于指定函数返回类型。这种写法通常用于需要使用表达式作为返回类型的情况，而这个表达式可能包含函数参数的类型。</p>
<p>让我们来详细解释这一写法的各个部分：</p>
<ul>
<li><code>auto</code>: 这表示函数的返回类型将由编译器进行推导。在这里，我们不显式指定返回类型，而是让编译器根据后面的 <code>decltype(a + b)</code> 推导出返回类型。</li>
<li><code>add(T1 a, T2 b)</code>: 这是函数模板的声明，接受两个参数，类型分别为 <code>T1</code> 和 <code>T2</code>。</li>
<li><code>-&gt; decltype(a + b)</code>: 这是尾返回类型的部分。它指定了函数的返回类型应该是表达式 <code>a + b</code> 的类型。<code>decltype</code> 是一个 C++ 关键字，用于获取表达式的类型。在这里，我们使用 <code>decltype(a + b)</code> 来获取参数 <code>a</code> 和 <code>b</code> 相加的类型，并将其作为函数的返回类型。</li>
</ul>
<p>这样的写法使得函数模板的返回类型可以根据传递给函数的具体参数类型而变化，使得函数模板更加灵活。在这个特定的例子中，<code>decltype(a + b)</code> 会获取 <code>a</code> 和 <code>b</code> 相加的类型，因此函数的返回类型将是它们相加的类型。</p>
<p>在 C++11 引入 <code>auto</code> 和尾返回类型之前，通常使用 <code>typename</code> 和 <code>::value_type</code> 等方式来指定模板函数的返回类型。尾返回类型的语法在某些情况下更加清晰和灵活。</p>
<h1 id="2-类模板"><a href="#2-类模板" class="headerlink" title="2 类模板"></a>2 类模板</h1><h2 id="2-1-类模板的定义"><a href="#2-1-类模板的定义" class="headerlink" title="2.1  类模板的定义"></a>2.1  类模板的定义</h2><p>为了多快好省地定义出一批<strong>相似的类</strong>,可以定义「类模板」，然后<strong>由类模板生成不同的类</strong>。</p>
<p>类模板的定义形式如下：</p>
<p>下面的<code>class</code>可以是<code>typename</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> 类型参数<span class="number">1</span>，<span class="keyword">class</span> 类型参数<span class="number">2</span>，...&gt; <span class="comment">//类型参数表</span></span><br><span class="line"><span class="keyword">class</span> 类模板名</span><br><span class="line">&#123;</span><br><span class="line">   成员函数和成员变量</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>用类模板定义对象的写法：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">类模板名&lt;真实类型参数表&gt; 对象名(构造函数实参表);</span><br></pre></td></tr></table></figure>
<h2 id="2-2-类模板例子"><a href="#2-2-类模板例子" class="headerlink" title="2.2 类模板例子"></a>2.2 类模板例子</h2><p>用 Pair 类用类模板的方式的实现，Pair 是一对的意思，也就是实现一个键值对（key-value）的关系的类。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Pair</span>(T1 k, T2 v):<span class="built_in">m_key</span>(k),<span class="built_in">m_value</span>(v) &#123;&#125;;</span><br><span class="line">    <span class="type">bool</span> <span class="keyword">operator</span> &lt; (<span class="type">const</span> Pair&lt;T1,T2&gt; &amp; p) <span class="type">const</span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T1 m_key;</span><br><span class="line">    T2 m_value;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类模板里成员函数的写法</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="type">bool</span> Pair&lt;T1,T2&gt;::<span class="keyword">operator</span> &lt; (<span class="type">const</span> Pair&lt;T1,T2&gt; &amp;p) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> m_value &lt; p.m_value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Pair&lt;string,<span class="type">int</span>&gt; <span class="title">Astudent</span><span class="params">(<span class="string">&quot;Jay&quot;</span>,<span class="number">20</span>)</span></span>; </span><br><span class="line">    <span class="function">Pair&lt;string,<span class="type">int</span>&gt; <span class="title">Bstudent</span><span class="params">(<span class="string">&quot;Tom&quot;</span>,<span class="number">21</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; (Astudent &lt; Bstudent) &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>需要注意的是，同一个类模板的两个模板类是不兼容的：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Pair&lt;string,<span class="type">int</span>&gt; *p;</span><br><span class="line">Pair&lt;string,<span class="type">double</span>&gt; a;</span><br><span class="line">p = &amp; a; <span class="comment">//错误！！</span></span><br></pre></td></tr></table></figure>
<h2 id="2-3-函数模板作为类模板成员"><a href="#2-3-函数模板作为类模板成员" class="headerlink" title="2.3 函数模板作为类模板成员"></a>2.3 函数模板作为类模板成员</h2><p>当函数模板作为类模板的成员函数时，是可以单独写成函数模板的形式，成员函数模板在使用的时候，编译器才会把函数模板根据传入的函数参数进行实例化，例子如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> T2&gt;</span></span><br><span class="line"><span class="function">    <span class="type">void</span> <span class="title">Func</span><span class="params">(T2 t)</span> </span>&#123; cout &lt;&lt; t; &#125; <span class="comment">// 成员函数模板</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    A&lt;<span class="type">int</span>&gt; a;</span><br><span class="line">    a.<span class="built_in">Func</span>(<span class="string">&#x27;K&#x27;</span>);     <span class="comment">//成员函数模板 Func被实例化</span></span><br><span class="line">    a.<span class="built_in">Func</span>(<span class="string">&quot;hello&quot;</span>); <span class="comment">//成员函数模板 Func再次被实例化</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="2-4-类模板与非类型参数"><a href="#2-4-类模板与非类型参数" class="headerlink" title="2.4 类模板与非类型参数"></a>2.4 类模板与非类型参数</h2><p>类模板的“&lt;类型参数表&gt;”中可以出现非类型参数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="type">int</span> size&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CArray</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Print</span><span class="params">( )</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="type">int</span> i = <span class="number">0</span>;i &lt; size; ++i)</span><br><span class="line">        cout &lt;&lt; array[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T array[size];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">CArray&lt;<span class="type">double</span>,<span class="number">40</span>&gt; a2;</span><br><span class="line">CArray&lt;<span class="type">int</span>,<span class="number">50</span>&gt; a3; <span class="comment">//a2和a3属于不同的类</span></span><br></pre></td></tr></table></figure>
<h2 id="2-5-类模板与静态成员变量"><a href="#2-5-类模板与静态成员变量" class="headerlink" title="2.5 类模板与静态成员变量"></a>2.5 类模板与静态成员变量</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模板类</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A5</span> &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> count; <span class="comment">// 静态成员</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A5</span>() &#123; count++; &#125; <span class="comment">// 默认构造函数，每次创建对象时增加 count</span></span><br><span class="line">    ~<span class="built_in">A5</span>() &#123; count--; &#125;; <span class="comment">// 析构函数，每次对象被销毁时减少 count</span></span><br><span class="line">    <span class="built_in">A5</span>(A5&amp; ) &#123; count++; &#125; <span class="comment">// 拷贝构造函数，每次拷贝对象时增加 count</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">PrintCount</span><span class="params">()</span> </span>&#123; cout &lt;&lt; count &lt;&lt; endl; &#125; <span class="comment">// 静态函数，用于输出 count 的值</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态成员的初始化，针对 int 类型的模板实例</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="type">int</span> A5&lt;<span class="type">int</span>&gt;::count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态成员的初始化，针对 double 类型的模板实例</span></span><br><span class="line"><span class="keyword">template</span>&lt;&gt; <span class="type">int</span> A5&lt;<span class="type">double</span>&gt;::count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    A5&lt;<span class="type">int</span>&gt; ia;  <span class="comment">// 创建 A&lt;int&gt; 类型的对象</span></span><br><span class="line">    A5&lt;<span class="type">int</span>&gt; ib;  <span class="comment">// 创建 A&lt;int&gt; 类型的对象</span></span><br><span class="line">    A5&lt;<span class="type">double</span>&gt; da; <span class="comment">// 创建 A&lt;double&gt; 类型的对象</span></span><br><span class="line">    ia.<span class="built_in">PrintCount</span>(); <span class="comment">// 输出 A&lt;int&gt; 类型对象的 count 值</span></span><br><span class="line">    ib.<span class="built_in">PrintCount</span>(); <span class="comment">// 输出 A&lt;int&gt; 类型对象的 count 值</span></span><br><span class="line">    da.<span class="built_in">PrintCount</span>(); <span class="comment">// 输出 A&lt;double&gt; 类型对象的 count 值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">2</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<h1 id="3-类模板与派生"><a href="#3-类模板与派生" class="headerlink" title="3 类模板与派生"></a>3 类模板与派生</h1><h2 id="3-1-类模板从类模板派生"><a href="#3-1-类模板从类模板派生" class="headerlink" title="3.1 类模板从类模板派生"></a>3.1 类模板从类模板派生</h2><img src="/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/v2-ee3f75cdb666eda175be99522313c0e9_720w.webp" class="" title="img">
<p>示例如下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 基类 - 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    T1 v1;</span><br><span class="line">    T2 v2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 基类构造函数</span></span><br><span class="line">    <span class="built_in">A</span>(T1 a, T2 b) : <span class="built_in">v1</span>(a), <span class="built_in">v2</span>(b) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 派生类 - 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A&lt;T2, T1&gt; &#123;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    T1 v3;</span><br><span class="line">    T2 v4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">// 派生类构造函数</span></span><br><span class="line">    <span class="built_in">B</span>(T1 a, T2 b, T1 c, T2 d) : <span class="built_in">A</span>&lt;T2, T1&gt;(b, a), <span class="built_in">v3</span>(c), <span class="built_in">v4</span>(d) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 派生类 - 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">public</span> B&lt;T, T&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    T v5;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 派生类构造函数</span></span><br><span class="line">    <span class="built_in">C</span>(T a, T b, T c, T d, T e) : <span class="built_in">B</span>&lt;T, T&gt;(b, a, d, c), <span class="built_in">v5</span>(e) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 成员函数用于输出信息</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;v1: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;v1 &lt;&lt; <span class="string">&quot;, v2: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;v2 &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;v3: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;v3 &lt;&lt; <span class="string">&quot;, v4: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;v4 &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;v5: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;v5 &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建派生类对象时传递初始值</span></span><br><span class="line">    <span class="function">C&lt;<span class="type">int</span>&gt; <span class="title">obj</span><span class="params">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出信息</span></span><br><span class="line">    obj.<span class="built_in">display</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>输出如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v1: 1, v2: 2</span><br><span class="line">v3: 4, v4: 3</span><br><span class="line">v5: 5</span><br></pre></td></tr></table></figure>
<h2 id="3-2-类模板从模板类派生"><a href="#3-2-类模板从模板类派生" class="headerlink" title="3.2 类模板从模板类派生"></a>3.2 类模板从模板类派生</h2><img src="/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/v2-b042318ffc49d89186e351a518b506fa_720w.webp" class="" title="img">
<p>上图的代码例子如下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>, <span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">D</span>() : <span class="built_in">v1</span>(<span class="built_in">T1</span>()), <span class="built_in">v2</span>(<span class="built_in">T2</span>()) &#123;&#125; <span class="comment">// 默认构造函数，初始化 v1 和 v2</span></span><br><span class="line">    <span class="built_in">D</span>(T1 a, T2 b) : <span class="built_in">v1</span>(a), <span class="built_in">v2</span>(b) &#123;&#125; <span class="comment">// 带参数的构造函数，初始化 v1 和 v2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 其他成员函数或操作</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    T1 v1;</span><br><span class="line">    T2 v2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">E</span> : <span class="keyword">public</span> D&lt;<span class="type">int</span>, <span class="type">double</span>&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">E</span>() : <span class="built_in">D</span>&lt;<span class="type">int</span>, <span class="type">double</span>&gt;(), <span class="built_in">v</span>(<span class="built_in">T</span>()) &#123;&#125; <span class="comment">// 默认构造函数，初始化 v</span></span><br><span class="line">    <span class="built_in">E</span>(<span class="type">int</span> a, <span class="type">double</span> b, T c) : <span class="built_in">D</span>&lt;<span class="type">int</span>, <span class="type">double</span>&gt;(a, b), <span class="built_in">v</span>(c) &#123;&#125; <span class="comment">// 带参数的构造函数，初始化基类和 v</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 其他成员函数或操作</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;v1: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;v1 &lt;&lt; <span class="string">&quot;, v2: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;v2 &lt;&lt; <span class="string">&quot;, v: &quot;</span> &lt;&lt; v &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    T v;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 创建 B&lt;char&gt; 类型的对象 obj1</span></span><br><span class="line">    <span class="function">E&lt;<span class="type">char</span>&gt; <span class="title">obj1</span><span class="params">(<span class="number">1</span>,<span class="number">2.0</span>,<span class="string">&#x27;a&#x27;</span>)</span></span>;</span><br><span class="line">    <span class="comment">// 调用 B 类的 display 函数，输出成员变量的值</span></span><br><span class="line">    obj1.<span class="built_in">display</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>程序输出如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v1: 1, v2: 2, v: a</span><br></pre></td></tr></table></figure>
<h2 id="3-3-类模板从普通类派生"><a href="#3-3-类模板从普通类派生" class="headerlink" title="3.3 类模板从普通类派生"></a>3.3 类模板从普通类派生</h2><img src="/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/v2-009b42ba9b1a599e1b1985ff3efdc38d_720w.webp" class="" title="img">
<p>上图的代码例子如下</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 基类 - 普通类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>(<span class="type">int</span> value = <span class="number">0</span>) : <span class="built_in">v1</span>(value) &#123;&#125; <span class="comment">// 默认参数的构造函数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 其他成员函数或操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="type">int</span> v1;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 派生类 - 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">B</span>(<span class="type">int</span> a, T b) : <span class="built_in">A</span>(a), <span class="built_in">v</span>(b) &#123;&#125; <span class="comment">// 带参数的构造函数，初始化基类和 v</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 其他成员函数或操作</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;v1: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;v1 &lt;&lt; <span class="string">&quot;, v: &quot;</span> &lt;&lt; v &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T v;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建 B&lt;char&gt; 类型的对象 obj1，传递参数 42 和 &#x27;X&#x27;</span></span><br><span class="line">    <span class="function">B&lt;<span class="type">char</span>&gt; <span class="title">obj1</span><span class="params">(<span class="number">42</span>, <span class="string">&#x27;X&#x27;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用 B 类的 display 函数，输出成员变量的值</span></span><br><span class="line">    obj1.<span class="built_in">display</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-4-普通类从模板类派生"><a href="#3-4-普通类从模板类派生" class="headerlink" title="3.4 普通类从模板类派生"></a>3.4 普通类从模板类派生</h2><img src="/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/v2-cdb24db3f74f354f3b5334edd5884c63_720w.webp" class="" title="img">
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>(T value) : <span class="built_in">v1</span>(value) &#123;&#125; <span class="comment">// 带参数的构造函数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 其他成员函数或操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    T v1;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 派生类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A&lt;<span class="type">int</span>&gt; &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">B</span>(<span class="type">int</span> a, <span class="type">double</span> b) : <span class="built_in">A</span>&lt;<span class="type">int</span>&gt;(a), <span class="built_in">v</span>(b) &#123;&#125; <span class="comment">// 带参数的构造函数，初始化基类和 v</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 其他成员函数或操作</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;v1: &quot;</span> &lt;&lt; <span class="keyword">this</span>-&gt;v1 &lt;&lt; <span class="string">&quot;, v: &quot;</span> &lt;&lt; v &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">double</span> v;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 创建 B 类型的对象 obj1，传递参数 42 和 3.14</span></span><br><span class="line">    <span class="function">B <span class="title">obj1</span><span class="params">(<span class="number">42</span>, <span class="number">3.14</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用 B 类的 display 函数，输出成员变量的值</span></span><br><span class="line">    obj1.<span class="built_in">display</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="4-类模板与友元"><a href="#4-类模板与友元" class="headerlink" title="4 类模板与友元"></a>4 类模板与友元</h1><h2 id="4-1-函数、类、类的成员函数作为类模板的友元"><a href="#4-1-函数、类、类的成员函数作为类模板的友元" class="headerlink" title="4.1  函数、类、类的成员函数作为类模板的友元"></a>4.1  函数、类、类的成员函数作为类模板的友元</h2><p>代码例子如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Func1</span><span class="params">()</span> </span>&#123; &#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 普通类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123; &#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 普通类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> </span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Func</span><span class="params">()</span> </span>&#123; &#125; <span class="comment">// 成员函数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tmp</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">Func1</span><span class="params">()</span></span>;    <span class="comment">// 友元函数</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">A</span>;         <span class="comment">// 友元类</span></span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">B::Func</span><span class="params">()</span></span>;  <span class="comment">// 友元类的成员函数</span></span><br><span class="line">&#125;; <span class="comment">// 任何从 Tmp 实例化来的类 ，都有以上三个友元</span></span><br></pre></td></tr></table></figure>
<h2 id="4-2-函数模板作为类模板的友元"><a href="#4-2-函数模板作为类模板的友元" class="headerlink" title="4.2 函数模板作为类模板的友元"></a>4.2 函数模板作为类模板的友元</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T1</span>,<span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pair</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T1 key;   <span class="comment">//关键字</span></span><br><span class="line">    T2 value; <span class="comment">//值</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Pair</span>(T1 k,T2 v):<span class="built_in">key</span>(k),<span class="built_in">value</span>(v) &#123; &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 友元函数模板</span></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T3</span>,<span class="keyword">class</span> <span class="title class_">T4</span>&gt;</span><br><span class="line">    <span class="keyword">friend</span> ostream &amp; <span class="keyword">operator</span>&lt;&lt; (ostream &amp; o, <span class="type">const</span> Pair&lt;T3,T4&gt; &amp; p);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T3</span>,<span class="keyword">class</span> <span class="title class_">T4</span>&gt;</span><br><span class="line">ostream &amp; <span class="keyword">operator</span>&lt;&lt; (ostream &amp; o, <span class="type">const</span> Pair&lt;T3,T4&gt; &amp; p)</span><br><span class="line">&#123;</span><br><span class="line">    o &lt;&lt; <span class="string">&quot;(&quot;</span> &lt;&lt; p.key &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; p.value &lt;&lt; <span class="string">&quot;)&quot;</span> ;</span><br><span class="line">    <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Pair&lt;string,<span class="type">int</span>&gt; <span class="title">student</span><span class="params">(<span class="string">&quot;Tom&quot;</span>,<span class="number">29</span>)</span></span>;</span><br><span class="line">    <span class="function">Pair&lt;<span class="type">int</span>,<span class="type">double</span>&gt; <span class="title">obj</span><span class="params">(<span class="number">12</span>,<span class="number">3.14</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">    cout &lt;&lt; student &lt;&lt; <span class="string">&quot; &quot;</span> &lt;&lt; obj;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Tom,<span class="number">29</span>) (<span class="number">12</span>,<span class="number">3.14</span>)</span><br></pre></td></tr></table></figure>
<h2 id="4-3-函数模板作为类的友元"><a href="#4-3-函数模板作为类的友元" class="headerlink" title="4.3 函数模板作为类的友元"></a>4.3 函数模板作为类的友元</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> v;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">A</span>(<span class="type">int</span> n):<span class="built_in">v</span>(n) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">void</span> <span class="title">Print</span><span class="params">(<span class="type">const</span> T &amp; p)</span></span>; <span class="comment">// 函数模板</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Print</span><span class="params">(<span class="type">const</span> T &amp; p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; p.v;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">A <span class="title">a</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">    <span class="built_in">Print</span>(a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure>
<h2 id="4-4-类模板作为类模板的友元"><a href="#4-4-类模板作为类模板的友元" class="headerlink" title="4.4 类模板作为类模板的友元"></a>4.4 类模板作为类模板的友元</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    T v;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">B</span>(T n):<span class="built_in">v</span>(n) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T2</span>&gt;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">class</span> <span class="title class_">A</span>; <span class="comment">// 友元类模板</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 类模板</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> </span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Func</span><span class="params">( )</span>  </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="function">B&lt;<span class="type">int</span>&gt; <span class="title">o</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">// 实例化B模板类</span></span><br><span class="line">        cout &lt;&lt; o.v &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    A&lt;<span class="type">double</span>&gt; a;</span><br><span class="line">    a.<span class="built_in">Func</span> ();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10</span><br></pre></td></tr></table></figure>
<h1 id="附录："><a href="#附录：" class="headerlink" title="附录："></a>附录：</h1><ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_53636439/article/details/119777817">C++函数模板的详细讲解【函数模板的概念、用法及其模板函数的概念知识】</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/101898043">C++ 模板常见特性（函数模板、类模板）</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>奔跑的IC
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://example.com/C_C++/%E5%87%BD%E6%95%B0%E6%A8%A1%E6%9D%BF%E5%92%8C%E7%B1%BB%E6%A8%A1%E6%9D%BF/" title="函数模板和类模板">http://example.com/C_C++/函数模板和类模板/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C</a>
              <a href="/tags/C/" rel="tag"><i class="fa fa-tag"></i> C++</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/C_C++/%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E4%B8%8E%E6%8C%87%E9%92%88%E5%87%BD%E6%95%B0/" rel="prev" title="函数指针与指针函数">
                  <i class="fa fa-chevron-left"></i> 函数指针与指针函数
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/C_C++/struct%E5%92%8Ctypedef%20struct/" rel="next" title="struct和typedef struct">
                  struct和typedef struct <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">奔跑的IC</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div><script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://lib.baomitu.com/canvas-nest.js/1.0.1/canvas-nest.js"></script>


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"zmurder","repo":"zmurder.github.io","client_id":"cf2343f27b6c29efe0bc","client_secret":"3268a1fa92706c7358d5421f88f76a0f7ada3188","admin_user":"zmurder","distraction_free_mode":true,"proxy":"https://strong-caramel-969805.netlify.app/github_access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"3dc52e95dbbcf439f86d5e1b145c4158"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
